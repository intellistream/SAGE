# ============================================================
# MemGPT Agent Pipeline é…ç½® (Agent ç‰ˆ)
# è®ºæ–‡: MemGPT: Towards LLMs as Operating Systems
# å˜ä½“: MemGPT-agent - å¸¦å·¥å…·è°ƒç”¨çš„ Agent ç‰ˆæœ¬
# ç‰¹ç‚¹: ç›¸æ¯”åŸºç¡€ç‰ˆ MemGPTï¼Œå¯ç”¨å·¥å…·è°ƒç”¨æ¨¡å¼ï¼ŒLLM å¯ä»¥ä¸»åŠ¨è°ƒç”¨è®°å¿†æ“ä½œ
# ============================================================

runtime:
  dataset: "locomo"
  memory_insert_verbose: false
  memory_test_verbose: true
  test_segments: 10
  service_timeout: 180.0              # Agent ç‰ˆéœ€è¦æ›´é•¿è¶…æ—¶ï¼ˆå¤šè½®å·¥å…·è°ƒç”¨ï¼‰

  # ============================================================
  # MemGPT Memory Management é…ç½®
  # è®ºæ–‡åŸæ–‡: Section 2.2 - Memory hierarchy
  # ============================================================
  context_window_size: 8192           # LLM çš„ context window (tokens)
  memory_pressure_threshold: 0.7      # 70% æ—¶è§¦å‘ Memory Pressure Warning
  queue_flush_threshold: 1.0          # 100% æ—¶å¼ºåˆ¶ flush FIFO queue

  prompt_template: |
    Based on the above context, answer the following question concisely.

    Question: {question}
    Answer:

  # ç¬¬äº”ç±»é—®é¢˜ä¸“ç”¨ Promptï¼ˆé€‰æ‹©é¢˜æ ¼å¼ï¼Œæ›´ç®€æ´ï¼‰
  prompt_template_category5: |
    Based on the above context, answer the following question.

    Question: {question}
    Answer:

  # LLM é…ç½®
  # é…ç½®1ï¼ˆLlama-3.1-8Bï¼Œç”¨äºå¯¹æ¯”ï¼‰ï¼š
  api_key: "token-abc123"
  base_url: "http://sage2:8000/v1"
  model_name: "/home/cyb/Llama-3.1-8B-Instruct"
  max_tokens: 256
  temperature: 0
  seed: 42

  # æ–°é…ç½®ï¼ˆPanGu Embedded 1Bï¼‰ï¼š
  # api_key: "iloveshuhao"
  # base_url: "http://172.17.0.1:1040/v1"
  # model_name: "pangu_embedded_1b"
  # max_tokens: 256
  # temperature: 0
  # seed: 42
  memory_name: "MemGPT-Agent"

  # Embedding é…ç½®
  embedding_base_url: "http://localhost:8900/v1"
  embedding_model: "BAAI/bge-m3"

# ============================================================
# æœåŠ¡é…ç½®
# MemGPT è®ºæ–‡åŸæ–‡: Figure 3 - Memory Hierarchy
#
# æ¶æ„è¯´æ˜:
# - Working Context (Core Memory): å§‹ç»ˆåœ¨ LLM context ä¸­ï¼Œé€šè¿‡å‡½æ•°è¯»å†™
# - Archival Storage: å¤–éƒ¨å­˜å‚¨ï¼Œå‘é‡æ£€ç´¢ï¼Œæ‰‹åŠ¨æ’å…¥
# - Recall Storage: å¤–éƒ¨å­˜å‚¨ï¼Œæ··åˆæ£€ç´¢(å‘é‡+å…¨æ–‡+RRF)ï¼Œè‡ªåŠ¨è¿½åŠ 
# - FIFO Queue: æœ€è¿‘å¯¹è¯æ¶ˆæ¯ï¼Œæ»¡æ—¶è‡ªåŠ¨flushåˆ°Recall
# ============================================================
services:
  register_memory_service: "hierarchical_memory"
  hierarchical_memory:
    tier_mode: "functional"           # åŠŸèƒ½åˆ†å±‚: core / archival / recall
    tier_names: ["core", "archival", "recall"]
    tier_capacities:
      core: 2000                      # âœ… 2000å­—ç¬¦ï¼ˆWorking Context é™åˆ¶ï¼‰
      archival: -1                    # âœ… æ— é™å®¹é‡ï¼ˆArchival Storageï¼‰
      recall: -1                      # âœ… æ— é™å®¹é‡ï¼ˆRecall Storageï¼‰
    migration_policy: "none"          # âœ… ç¦ç”¨è‡ªåŠ¨è¿ç§»ï¼ˆç”±Agentæ‰‹åŠ¨ç®¡ç†ï¼‰
    embedding_dim: 1024               # bge-m3 è¾“å‡º 1024 ç»´å‘é‡

    # MemGPT æ ¸å¿ƒç‰¹æ€§ï¼ˆè®ºæ–‡ Section 2.2ï¼‰
    use_core_embedding: false         # âœ… Coreä¸ä½¿ç”¨å‘é‡æ£€ç´¢ï¼ˆå§‹ç»ˆåœ¨contextï¼‰
    use_recall_hybrid: true           # âœ… Recallä½¿ç”¨æ··åˆæ£€ç´¢ï¼ˆå‘é‡+FTS+RRFï¼‰
    rrf_k: 60                         # âœ… RRFå¸¸æ•°ï¼ˆè®ºæ–‡å®ç°ï¼‰
    vector_weight: 0.5                # å‘é‡æ£€ç´¢æƒé‡
    fts_weight: 0.5                   # å…¨æ–‡æ£€ç´¢æƒé‡
  memory_retrieval_adapter: "none"

# ============================================================
# å·¥å…·é…ç½®ï¼ˆAgent ç‰ˆç‰¹æœ‰ï¼‰
# è®ºæ–‡åŸæ–‡: Section 2.1 - LLM processor
#
# MemGPT çš„æ ¸å¿ƒå·¥å…·ï¼ˆBASE_TOOLS + BASE_MEMORY_TOOLSï¼‰:
# - send_message: å‘é€æ¶ˆæ¯ç»™ç”¨æˆ·
# - conversation_search: æœç´¢å¯¹è¯å†å²(Recall Storage)
# - archival_memory_insert/search: æ¡£æ¡ˆè®°å¿†æ“ä½œ
# - core_memory_append/replace: Core Memoryç¼–è¾‘
# ============================================================
tools:
  enabled: true                       # å¯ç”¨å·¥å…·è°ƒç”¨
  tool_list:
  # ==================== Core Memory Tools ====================
  - name: "core_memory_append"
    description: "Append content to the core memory (working context). Core memory is always visible to you."
    parameters:
      label: "string"                 # Block label (e.g., 'persona', 'human')
      content: "string"               # Content to append

  - name: "core_memory_replace"
    description: "Replace specific content in core memory with new content"
    parameters:
      label: "string"                 # Block label
      old_content: "string"           # Exact text to replace
      new_content: "string"           # New text

  # ==================== Archival Memory Tools ====================
  - name: "archival_memory_insert"
    description: "Insert content into archival memory for long-term storage. Use this to save important information that doesn't fit in core memory."
    parameters:
      content: "string"               # Content to insert
      tags: "list[string] (optional)" # Tags for categorization

  - name: "archival_memory_search"
    description: "Search archival memory using semantic similarity"
    parameters:
      query: "string"                 # Search query
      tags: "list[string] (optional)" # Filter by tags
      top_k: "integer (default: 5)"   # Number of results
      start_datetime: "string (optional)"  # Filter by date range
      end_datetime: "string (optional)"

  # ==================== Recall Memory Tools ====================
  - name: "conversation_search"
    description: "Search recent conversation history using hybrid retrieval (semantic + keyword matching)"
    parameters:
      query: "string"                 # Search query
      roles: "list[string] (optional)"  # Filter by role: 'user', 'assistant', 'tool'
      limit: "integer (default: 50)"  # Max results
      start_date: "string (optional)" # Filter by date range
      end_date: "string (optional)"

  # ==================== Communication Tool ====================
  - name: "send_message"
    description: "Send a message to the user. This is the ONLY way to communicate with the user."
    parameters:
      message: "string"               # Message content

  tool_choice: "auto"                 # LLM è‡ªåŠ¨å†³å®šæ˜¯å¦è°ƒç”¨å·¥å…·

# ============================================================
# Operator é…ç½®
# è®ºæ–‡åŸæ–‡: Figure 3 - MemGPT System Architecture
#
# MemGPT çš„è®¾è®¡ç‰¹ç‚¹:
# - PreInsert/PostInsert: æ— å¤æ‚é¢„å¤„ç†ï¼ŒAgenté€šè¿‡å·¥å…·ä¸»åŠ¨ç®¡ç†
# - PreRetrieval: ç”Ÿæˆembeddingç”¨äºå‘é‡æ£€ç´¢
# - PostRetrieval: ä¸‰å±‚èåˆ(Coreå§‹ç»ˆåœ¨context + Archival/Recall RRFèåˆ)
# ============================================================
operators:
  # ----------------------------------------------------------
  # PreInsert: æ— é¢„å¤„ç†ï¼ˆè®ºæ–‡æ— æåŠï¼‰
  # åŸå› : Agenté€šè¿‡å·¥å…·ä¸»åŠ¨å†³å®šæ’å…¥å†…å®¹ï¼Œæ— éœ€è‡ªåŠ¨å®ä½“æŠ½å–
  # ----------------------------------------------------------
  pre_insert:
    action: "none"                    # âœ… å¿ äºåŸæ–‡

  # ----------------------------------------------------------
  # PostInsert: æ— è‡ªåŠ¨ä¼˜åŒ–ï¼ˆè®ºæ–‡Section 2.1ï¼‰
  # åŸå› : Core Memoryç¼–è¾‘ç”±Agenté€šè¿‡å·¥å…·ä¸»åŠ¨è°ƒç”¨
  #       (core_memory_replace, memory_apply_patchç­‰)
  # ----------------------------------------------------------
  post_insert:
    action: "none"                    # âœ… å¿ äºåŸæ–‡ï¼ˆreplaceæ˜¯å·¥å…·ï¼Œéoperatorï¼‰

  # ----------------------------------------------------------
  # PreRetrieval: ç”Ÿæˆembeddingï¼ˆè®ºæ–‡Section 2.2ï¼‰
  # ç”¨é€”: ä¸ºArchivalå’ŒRecallçš„å‘é‡æ£€ç´¢æä¾›queryå‘é‡
  # ----------------------------------------------------------
  pre_retrieval:
    action: "embedding"               # âœ… å¿ äºåŸæ–‡

  # ----------------------------------------------------------
  # PostRetrieval: å¤šå±‚èåˆï¼ˆè®ºæ–‡Figure 3 + Section 3ï¼‰
  # æ ¸å¿ƒé€»è¾‘:
  # 1. Core Memory: å§‹ç»ˆåœ¨contextï¼Œå®Œæ•´è¿”å›
  # 2. Archival + Recall: RRFèåˆåè¿”å›Top-K
  # 3. ç»„è£…æˆæœ€ç»ˆprompt
  # ----------------------------------------------------------
  post_retrieval:
    action: "merge"
    merge_type: "multi_tier"          # âœ… è‡ªå®ç°çš„ä¸‰å±‚èåˆç®—å­
    tiers_to_search: ["core", "archival", "recall"]
    fusion_strategy: "rrf"            # âœ… Reciprocal Rank Fusion
    rrf_k: 60                         # âœ… è®ºæ–‡å®ç°çš„å¸¸æ•°
    vector_weight: 0.5                # Archivalæƒé‡
    fts_weight: 0.5                   # Recallæƒé‡
    top_k: 10                         # è¿”å›Top-Kèåˆç»“æœ

    # Memory Pressure Warningï¼ˆè®ºæ–‡Section 2.2æ ¸å¿ƒåˆ›æ–°ï¼‰
    # å½“contextä½¿ç”¨ç‡è¶…è¿‡é˜ˆå€¼æ—¶ï¼Œæ’å…¥ç³»ç»Ÿè­¦å‘Š
    enable_memory_pressure_warning: true

    conversation_format_prompt: |
      The following is the relevant context from memory.
      You can use tools to search for more information if needed.

# ============================================================
# MemGPT å®ç°æ€»ç»“ä¸è®ºæ–‡å¯¹ç…§
# ============================================================
#
# ğŸ“š è®ºæ–‡: MemGPT: Towards LLMs as Operating Systems (arXiv:2310.08560v2)
# ğŸ¯ æ ¸å¿ƒåˆ›æ–°: Virtual Context Management (OS-inspired memory hierarchy)
#
# ============================================================
# âœ… å·²å®ç°çš„æ ¸å¿ƒç‰¹æ€§
# ============================================================
#
# 1. ä¸‰å±‚å†…å­˜æ¶æ„ (Section 2.2 - Memory Hierarchy) âœ… 100%
#    è®ºæ–‡åŸæ–‡: "MemGPT uses a hierarchical memory system"
#    å®ç°çŠ¶æ€:
#    - Core Memory (Working Context): 2000 chars, å§‹ç»ˆåœ¨ LLM context ä¸­
#    - Archival Storage: æ— é™å®¹é‡, å‘é‡æ£€ç´¢, æ‰‹åŠ¨æ’å…¥
#    - Recall Storage: æ— é™å®¹é‡, æ··åˆæ£€ç´¢(å‘é‡+å…¨æ–‡+RRF), è‡ªåŠ¨è¿½åŠ 
#    æ–‡ä»¶: hierarchical_memory_service.py (tier_mode="functional")
#
# 2. Core Memory æ­£ç¡®å®šä½ (Figure 3) âœ… 100%
#    è®ºæ–‡åŸæ–‡: "Working Context is read-write via functions"
#    å®ç°çŠ¶æ€:
#    - use_core_embedding: false (ä¸ä½¿ç”¨å‘é‡æ£€ç´¢)
#    - _get_core_memory_blocks() æ–¹æ³•ç›´æ¥è¿”å›æ‰€æœ‰ Core å†…å®¹
#    - å§‹ç»ˆåœ¨ context ä¸­ï¼Œä¸éœ€è¦"æ£€ç´¢"
#    æ–‡ä»¶: hierarchical_memory_service.py (L540-570, L1350-1383)
#
# 3. Recall æ··åˆæ£€ç´¢ + RRF èåˆ (Section 2.2) âœ… 100%
#    è®ºæ–‡åŸæ–‡: "Messages are retrieved using hybrid search with RRF (k=60)"
#    å®ç°çŠ¶æ€:
#    - use_recall_hybrid: true
#    - _rrf_fusion() å®ç° Reciprocal Rank Fusion
#    - rrf_k: 60 (ä¸è®ºæ–‡ä¸€è‡´)
#    - å…¬å¼: score = vector_weight/(k+rank_v) + fts_weight/(k+rank_fts)
#    æ–‡ä»¶: hierarchical_memory_service.py (L1289-1348)
#
# 4. Memory Pressure Warning (Section 2.2 æ ¸å¿ƒåˆ›æ–°) âœ… 95%
#    è®ºæ–‡åŸæ–‡: "When prompt tokens exceed 70% of context window,
#               the queue manager inserts a system message warning"
#    å®ç°çŠ¶æ€:
#    - MemoryPressureMonitor ç±»ç›‘æ§ context ä½¿ç”¨ç‡
#    - memory_pressure_threshold: 0.7 (70%)
#    - è‡ªåŠ¨ç”Ÿæˆè­¦å‘Šæ¶ˆæ¯æç¤º Agent ä¿å­˜ä¿¡æ¯
#    - æ£€æµ‹ should_flush æ ‡å¿— (100% æ—¶)
#    æ–‡ä»¶: multi_tier.py (L18-124, L90-125)
#    ç¼ºå¤±: FIFO Queue çš„è‡ªåŠ¨ flush é€»è¾‘ (ä»…æ£€æµ‹ï¼Œæœªå®ç°è‡ªåŠ¨ç§»åŠ¨)
#
# 5. PostRetrieval ä¸‰å±‚èåˆ (Figure 3) âœ… 100%
#    è®ºæ–‡åŸæ–‡: "Combines working context + archival + recall results"
#    å®ç°çŠ¶æ€:
#    - MultiTierMerge ç®—å­
#    - Core Memory å®Œæ•´è¿”å› (_format_core_memory)
#    - Archival + Recall RRF èåˆåå– Top-K
#    - è¾“å‡º enhanced_context åŒ…å«æ‰€æœ‰å±‚çš„ç»“æœ
#    æ–‡ä»¶: multi_tier.py (L127-265)
#
# 6. å®Œæ•´çš„å·¥å…·é›† (Section 2.1 - BASE_TOOLS) âœ… 100%
#    è®ºæ–‡å®šä¹‰çš„æ ¸å¿ƒå·¥å…·:
#    âœ… send_message              - é€šä¿¡å·¥å…·
#    âœ… core_memory_append        - Core Memory ç¼–è¾‘
#    âœ… core_memory_replace       - Core Memory æ›¿æ¢
#    âœ… archival_memory_insert    - Archival æ’å…¥
#    âœ… archival_memory_search    - Archival æ£€ç´¢
#    âœ… conversation_search       - Recall æ£€ç´¢ (æ··åˆæ£€ç´¢)
#    é…ç½®: tools.tool_list (L109-155)
#
# 7. é…ç½®é©±åŠ¨çš„è®°å¿†ç®¡ç† âœ… 100%
#    - migration_policy: "none" (ç¦ç”¨è‡ªåŠ¨è¿ç§»)
#    - æ‰€æœ‰ MemGPT å‚æ•°æœ‰é»˜è®¤å€¼ (åå‘å…¼å®¹ MemoryBank ç­‰)
#    - é€šè¿‡é…ç½®åˆ‡æ¢ä¸åŒè®°å¿†ç³»ç»Ÿçš„è¡Œä¸º
#    æ–‡ä»¶: memory_service_factory.py (L225-253)
#
# ============================================================
# âš ï¸ éƒ¨åˆ†å®ç°çš„ç‰¹æ€§
# ============================================================
#
# 1. FIFO Queue ç®¡ç† (Section 2.2) âš ï¸ 60%
#    è®ºæ–‡åŸæ–‡: "FIFO queue stores recent messages, automatically
#               flushed to Recall Storage when full"
#    å®ç°çŠ¶æ€:
#    - âœ… Memory Pressure æ£€æµ‹é€»è¾‘ (MemoryPressureMonitor)
#    - âœ… should_flush æ ‡å¿—åˆ¤æ–­
#    - âŒ ç¼ºå°‘çœŸæ­£çš„ Queue æ•°æ®ç»“æ„
#    - âŒ ç¼ºå°‘è‡ªåŠ¨ flush åˆ° Recall Storage çš„é€»è¾‘
#    åŸå› : Benchmark åœºæ™¯ä¸‹æ¯è½®å¯¹è¯ç‹¬ç«‹æ’å…¥ï¼Œæ— éœ€å®æ—¶ Queue
#    å½±å“: ä¸å½±å“è®°å¿†å­˜å‚¨å’Œæ£€ç´¢çš„æ­£ç¡®æ€§ï¼Œä½†ç¼ºå°‘ OS-inspired çš„åŠ¨æ€ç®¡ç†
#
# 2. å…¨æ–‡æ£€ç´¢ (FTS) (Section 2.2) âš ï¸ 50%
#    è®ºæ–‡åŸæ–‡: "Recall uses hybrid retrieval (vector + full-text search)"
#    å®ç°çŠ¶æ€:
#    - âœ… RRF èåˆç®—æ³•å·²å®ç°
#    - âš ï¸ FTS éƒ¨åˆ†æ ‡è®°ä¸º TODO (L588-591 in hierarchical_memory_service.py)
#    - å½“å‰ç”¨å‘é‡æ£€ç´¢æ¨¡æ‹Ÿï¼Œæœªä½¿ç”¨çœŸæ­£çš„å…¨æ–‡ç´¢å¼•
#    åŸå› : neuromem HybridCollection éœ€è¦æ‰©å±• FTS æ”¯æŒ
#    å½±å“: æ£€ç´¢è´¨é‡ç•¥ä½äºè®ºæ–‡åŸç‰ˆ (ç¼ºå°‘å…³é”®è¯åŒ¹é…)
#
# ============================================================
# âŒ æœªå®ç°çš„ç‰¹æ€§
# ============================================================
#
# 1. Function Chaining (Section 2.4) âŒ 0%
#    è®ºæ–‡åŸæ–‡: "Functions can be called with request_heartbeat=true
#               to chain multiple function calls"
#    å®ç°çŠ¶æ€: å®Œå…¨æœªå®ç°
#    åŸå› : éœ€è¦ Agent æ‰§è¡Œå±‚æ”¯æŒï¼Œè¶…å‡º Pipeline/Service å±‚èŒƒå›´
#    å½±å“: Agent æ— æ³•è¿ç»­è°ƒç”¨å¤šä¸ªå‡½æ•° (å¦‚å¤šé¡µæ£€ç´¢ã€å¤šæ–‡æ¡£æŸ¥è¯¢)
#    æ‰€éœ€å·¥ä½œ: Agent å±‚è§£æ request_heartbeat å‚æ•°å¹¶å®ç°æ§åˆ¶æµ
#
# 2. Event-based Control Flow (Section 2.4) âŒ 0%
#    è®ºæ–‡åŸæ–‡: "Events trigger LLM inference: user messages,
#               system messages, timed events"
#    å®ç°çŠ¶æ€: å®Œå…¨æœªå®ç°
#    åŸå› : Benchmark åœºæ™¯ä¸ºæ‰¹å¤„ç†æ¨¡å¼ï¼Œæ— éœ€äº‹ä»¶é©±åŠ¨
#    å½±å“: æ— æ³•æ”¯æŒå®æ—¶äº¤äº’åœºæ™¯ (å¦‚ç”¨æˆ·ç™»å½•æé†’ã€å®šæ—¶ä»»åŠ¡)
#
# 3. å®Œæ•´çš„ FIFO Queue + Queue Manager (Section 2.2) âŒ 40%
#    è®ºæ–‡åŸæ–‡: "Queue Manager controls context overflow via
#               queue eviction policy"
#    å®ç°çŠ¶æ€:
#    - âœ… æ£€æµ‹é€»è¾‘ (Memory Pressure Monitor)
#    - âŒ Queue æ•°æ®ç»“æ„
#    - âŒ è‡ªåŠ¨ eviction å’Œ flush
#    æ‰€éœ€å·¥ä½œ:
#      - åœ¨ pipeline ä¸­ç»´æŠ¤ FIFO Queue
#      - å®ç°è‡ªåŠ¨ flush é€»è¾‘ (è¾¾åˆ°é˜ˆå€¼æ—¶ç§»åŠ¨åˆ° Recall)
#      - Queue å†…å®¹æ³¨å…¥åˆ° context çš„é€»è¾‘
#
# ============================================================
# ğŸ“Š å®ç°å®Œæ•´åº¦è¯„ä¼°
# ============================================================
#
# æ ¸å¿ƒè®°å¿†æ¶æ„:        100% âœ… (ä¸‰å±‚å­˜å‚¨ + æ­£ç¡®çš„æ£€ç´¢æ–¹å¼)
# Memory Pressure:     95%  âœ… (ç›‘æ§å®Œæˆï¼Œç¼ºå°‘è‡ªåŠ¨ flush)
# å·¥å…·é›†:             100% âœ… (æ‰€æœ‰ BASE_TOOLS å·²é…ç½®)
# RRF èåˆ:           100% âœ… (k=60, ä¸è®ºæ–‡ä¸€è‡´)
# PostRetrieval:      100% âœ… (ä¸‰å±‚èåˆé€»è¾‘å®Œæ•´)
# FIFO Queue:          60%  âš ï¸ (æ£€æµ‹å·²å®ç°ï¼Œè‡ªåŠ¨ç®¡ç†æœªå®Œæˆ)
# å…¨æ–‡æ£€ç´¢:            50%  âš ï¸ (ç®—æ³•å®Œæ•´ï¼Œç´¢å¼•å¾…å®ç°)
# Function Chaining:    0%  âŒ (éœ€è¦ Agent å±‚æ”¯æŒ)
# Event-driven:         0%  âŒ (Benchmark åœºæ™¯ä¸éœ€è¦)
#
# æ€»ä½“å®Œæ•´åº¦: ~85% âœ…
#
# ============================================================
# ğŸ¯ ä¸è®ºæ–‡çš„ä¸»è¦å·®è·
# ============================================================
#
# 1. ã€P0 - é‡è¦ä½†ä¸ç´§æ€¥ã€‘FIFO Queue çš„å®Œæ•´å®ç°
#    - å½“å‰: åªæœ‰æ£€æµ‹é€»è¾‘ï¼Œæ— è‡ªåŠ¨ç®¡ç†
#    - å½±å“: OS-inspired çš„åŠ¨æ€å†…å­˜ç®¡ç†ä¸å®Œæ•´
#    - ä¿®å¤: åœ¨ pipeline å±‚æ·»åŠ  Queue æ•°æ®ç»“æ„å’Œ flush é€»è¾‘
#
# 2. ã€P1 - å¯é€‰å¢å¼ºã€‘çœŸæ­£çš„å…¨æ–‡æ£€ç´¢ (FTS)
#    - å½“å‰: ç”¨å‘é‡æ£€ç´¢æ¨¡æ‹Ÿ
#    - å½±å“: æ£€ç´¢è´¨é‡ç•¥ä½äºè®ºæ–‡ (ç¼ºå°‘ç²¾ç¡®å…³é”®è¯åŒ¹é…)
#    - ä¿®å¤: æ‰©å±• neuromem æ”¯æŒ FTS ç´¢å¼• (å¦‚ BM25)
#
# 3. ã€P2 - éå…³é”®ã€‘Function Chaining
#    - å½“å‰: æœªå®ç°
#    - å½±å“: Agent æ— æ³•å¤šæ­¥æ£€ç´¢
#    - ä¿®å¤: Agent å±‚æ”¯æŒ request_heartbeat å‚æ•°
#
# 4. ã€P3 - åœºæ™¯ç›¸å…³ã€‘Event-based Control Flow
#    - å½“å‰: æœªå®ç°
#    - å½±å“: ä»…æ”¯æŒæ‰¹å¤„ç†ï¼Œä¸æ”¯æŒå®æ—¶äº¤äº’
#    - ä¿®å¤: å®ç°äº‹ä»¶å¾ªç¯å’Œäº‹ä»¶å¤„ç†å™¨ (éœ€è¦æ—¶)
#
# ============================================================
# âœ¨ å®ç°äº®ç‚¹
# ============================================================
#
# 1. é…ç½®é©±åŠ¨è®¾è®¡ âœ…
#    - æ‰€æœ‰ MemGPT ç‰¹æ€§é€šè¿‡é…ç½®å¼€å…³æ§åˆ¶
#    - åå‘å…¼å®¹ (MemoryBank ç­‰ç³»ç»Ÿä½¿ç”¨é»˜è®¤å€¼)
#    - ç¬¦åˆ SAGE æ¡†æ¶è®¾è®¡åŸåˆ™
#
# 2. æ¨¡å—åŒ–å®ç° âœ…
#    - HierarchicalMemoryService: ä¸‰å±‚å­˜å‚¨ + RRF
#    - MultiTierMerge: PostRetrieval èåˆ
#    - MemoryPressureMonitor: å†…å­˜å‹åŠ›ç›‘æ§
#    - å„ç»„ä»¶èŒè´£æ¸…æ™°ï¼Œä¾¿äºç»´æŠ¤
#
# 3. å¿ äºè®ºæ–‡åŸç† âœ…
#    - Core Memory å®šä½æ­£ç¡® (å§‹ç»ˆåœ¨ context)
#    - RRF ç®—æ³•å‚æ•°ä¸è®ºæ–‡ä¸€è‡´ (k=60)
#    - Memory Pressure é˜ˆå€¼ä¸è®ºæ–‡ä¸€è‡´ (70%)
#    - å·¥å…·é›†å®Œæ•´è¦†ç›–è®ºæ–‡å®šä¹‰
#
# 4. è¯¦ç»†çš„æ–‡æ¡£å’Œæ³¨é‡Š âœ…
#    - é…ç½®æ–‡ä»¶å¼•ç”¨è®ºæ–‡ç« èŠ‚
#    - ä»£ç æ³¨é‡Šè¯´æ˜è®¾è®¡æ„å›¾
#    - ä¾¿äºç†è§£å’Œåç»­æ‰©å±•
#
# ============================================================
