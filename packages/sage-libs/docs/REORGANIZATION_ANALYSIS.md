# sage-libs é‡ç»„ä¸€è‡´æ€§åˆ†æ

## ğŸš¨ æ ¸å¿ƒé—®é¢˜

**å½“å‰åˆ’åˆ†å­˜åœ¨é€»è¾‘ä¸ä¸€è‡´**ï¼š

- âœ… **Agent å·¥å…·å…¨éƒ¨å¤–è¿** â†’ `isage-agentic` (planning, tool-selection, runtime, bots)
- âŒ **RAG å·¥å…·å…¨éƒ¨ä¿ç•™** â†’ ç•™åœ¨ `sage-libs` (document_loaders, chunk, retriever, generator)

## ğŸ“Š ç›¸ä¼¼æ€§å¯¹æ¯”

| ç»´åº¦          | Agent å·¥å…·           | RAG å·¥å…·             | ç»“è®º    |
| ------------- | -------------------- | -------------------- | ------- |
| **åº”ç”¨å±‚çº§**  | åº”ç”¨å±‚ (L3/L4)       | åº”ç”¨å±‚ (L3/L4)       | âœ… ç›¸åŒ |
| **LLM ä¾èµ–**  | å¼ºä¾èµ– LLM/Embedding | å¼ºä¾èµ– LLM/Embedding | âœ… ç›¸åŒ |
| **SAGE è€¦åˆ** | æ¾è€¦åˆï¼ˆå¯ç‹¬ç«‹ä½¿ç”¨ï¼‰ | æ¾è€¦åˆï¼ˆå¯ç‹¬ç«‹ä½¿ç”¨ï¼‰ | âœ… ç›¸åŒ |
| **å¤ç”¨æ€§**    | å¯è¢«å…¶ä»–é¡¹ç›®ä½¿ç”¨     | å¯è¢«å…¶ä»–é¡¹ç›®ä½¿ç”¨     | âœ… ç›¸åŒ |
| **åŠŸèƒ½å®šä½**  | "å·¥å…·åŒ…"             | "å·¥å…·åŒ…"             | âœ… ç›¸åŒ |

**ç»“è®º**ï¼šAgent å’Œ RAG åœ¨æ‰€æœ‰å…³é”®ç»´åº¦ä¸Šéƒ½ç›¸ä¼¼ï¼Œåº”è¯¥ä½¿ç”¨**ç›¸åŒçš„åˆ’åˆ†ç­–ç•¥**ã€‚

## ğŸ¯ ä¸¤ç§ä¸€è‡´æ€§æ–¹æ¡ˆ

### æ–¹æ¡ˆ Aï¼šä¸¤è€…éƒ½å¤–è¿ï¼ˆæ¨èï¼‰

**ä¼˜ç‚¹**ï¼š

- âœ… é€»è¾‘ä¸€è‡´ï¼šåº”ç”¨å±‚å·¥å…·ç»Ÿä¸€å¤–è¿
- âœ… æŒ‰éœ€å®‰è£…ï¼šç”¨æˆ·å¯é€‰æ‹©å®‰è£… agent/rag
- âœ… ç‹¬ç«‹è¿­ä»£ï¼šagent/rag å¯ç‹¬ç«‹å‘ç‰ˆ
- âœ… æ¸…æ™°è¾¹ç•Œï¼šsage-libs åªä¿ç•™åŸºç¡€å·¥å…·
- âœ… æ›´å¥½å¤ç”¨ï¼šå…¶ä»–é¡¹ç›®å¯å•ç‹¬ä½¿ç”¨ isage-rag

**åŒ…ç»“æ„**ï¼š

```
isage-agentic/      # Agent æ¡†æ¶ï¼ˆå·²å®Œæˆï¼‰
  - planning/
  - tool_selection/
  - runtime/
  - bots/

isage-rag/          # RAG å·¥å…·ï¼ˆæ–°å»ºè®®ï¼‰
  - document_loaders/
  - chunk/
  - types/
  - pipeline/

sage-libs/          # åŸºç¡€å·¥å…·ï¼ˆä¿ç•™ï¼‰
  - dataops/
  - safety/
  - privacy/
  - foundation/
  - integrations/
```

**å®‰è£…æ–¹å¼**ï¼š

```bash
# æœ€å°å®‰è£…
pip install isage-libs

# éœ€è¦ Agent
pip install isage-libs[agentic]

# éœ€è¦ RAG
pip install isage-libs[rag]

# å…¨éƒ¨å®‰è£…
pip install isage-libs[all]
```

### æ–¹æ¡ˆ Bï¼šä¸¤è€…éƒ½ä¿ç•™ï¼ˆä¿å®ˆï¼‰

**ä¼˜ç‚¹**ï¼š

- âœ… æ— éœ€è¿ç§» RAG ä»£ç 
- âœ… ä¿æŒç°æœ‰ä¾èµ–å…³ç³»
- âœ… å‡å°‘çŸ­æœŸå·¥ä½œé‡

**ç¼ºç‚¹**ï¼š

- âŒ é€»è¾‘ä¸ä¸€è‡´ï¼šä¸ºä»€ä¹ˆ agent å¤–è¿è€Œ rag ä¿ç•™ï¼Ÿ
- âŒ åŒ…ä½“ç§¯å¤§ï¼šç”¨æˆ·è¢«è¿«å®‰è£…æ‰€æœ‰å·¥å…·
- âŒ éš¾ä»¥å¤ç”¨ï¼šå…¶ä»–é¡¹ç›®éœ€è¦ä¾èµ–æ•´ä¸ª sage-libs
- âŒ æ’¤é”€å·²å®Œæˆå·¥ä½œï¼šéœ€è¦æŠŠ agentic ç§»å› sage-libs

**åŒ…ç»“æ„**ï¼š

```
sage-libs/
  - agentic/       # ç§»å›ï¼ˆéœ€æ’¤é”€å¤–è¿ï¼‰
  - rag/
  - dataops/
  - safety/
  - ...
```

## ğŸ” å…·ä½“æ¨¡å—åˆ†æ

### RAG æ¨¡å—çš„ç‹¬ç«‹æ€§éªŒè¯

æŸ¥çœ‹ `sage.libs.rag/` çš„å®é™…ä½¿ç”¨æƒ…å†µï¼š

**æ ¸å¿ƒç»„ä»¶** (åœ¨ `sage-libs/src/sage/libs/rag/`)ï¼š

```python
# document_loaders.py - æ–‡æ¡£åŠ è½½å™¨
class TextLoader, PDFLoader, DocxLoader, MarkdownLoader
â†’ çº¯å·¥å…·ç±»ï¼Œä¸ä¾èµ– SAGE kernel

# chunk.py - æ–‡æœ¬åˆ†å—
class CharacterSplitter, SentenceTransformersTokenTextSplitter
â†’ çº¯ç®—æ³•ï¼Œä¸ä¾èµ– SAGE kernel

# types.py - ç±»å‹å®šä¹‰
RAGDocument, RAGQuery, RAGResponse
â†’ æ•°æ®ç±»å‹ï¼Œæ— ä¾èµ–

# pipeline.py - RAG ç®¡é“ç¼–æ’
class RAGPipeline
â†’ ç¼–æ’é€»è¾‘ï¼Œå¯ç‹¬ç«‹ä½¿ç”¨
```

**ä½¿ç”¨æƒ…å†µ** (åœ¨ `sage-middleware/operators/rag/`)ï¼š

```python
# middleware å±‚åªæ˜¯é‡å¯¼å‡º
from sage.libs.rag.document_loaders import TextLoader  # é‡å¯¼å‡º
from sage.libs.rag.chunk import CharacterSplitter       # é‡å¯¼å‡º
from sage.libs.rag.types import RAGDocument            # é‡å¯¼å‡º
```

**ç»“è®º**ï¼šRAG æ¨¡å—å®Œå…¨å¯ä»¥ç‹¬ç«‹ï¼Œä¸ agentic æƒ…å†µç›¸åŒã€‚

## ğŸ’¡ æ¨èæ–¹æ¡ˆï¼šæ–¹æ¡ˆ Aï¼ˆä¸¤è€…éƒ½å¤–è¿ï¼‰

### å®æ–½æ­¥éª¤

1. **åˆ›å»º isage-rag ä»“åº“**

   ```bash
   gh repo create intellistream/sage-rag --public
   ```

1. **è¿ç§»ä»£ç **

   ```bash
   # å¤åˆ¶ rag/ ç›®å½•åˆ°æ–°ä»“åº“
   cp -r packages/sage-libs/src/sage/libs/rag/ ../sage-rag/src/sagerag/

   # æ›´æ–° imports
   # sage.libs.rag â†’ sagerag
   ```

1. **æ›´æ–° sage-libs**

   ```bash
   # åˆ é™¤åŸç›®å½•
   rm -rf packages/sage-libs/src/sage/libs/rag/

   # æ·»åŠ å…¼å®¹å±‚ï¼ˆå¯é€‰ï¼‰
   echo "import warnings; warnings.warn('Use isage-rag instead')" > \
     packages/sage-libs/src/sage/libs/rag.py

   # æ›´æ–° pyproject.toml
   [project.optional-dependencies]
   rag = ["isage-rag>=0.1.0"]
   ```

1. **æ›´æ–° middleware**

   ```python
   # packages/sage-middleware/src/sage/middleware/operators/rag/__init__.py
   # æ”¹ä¸ºä» sagerag å¯¼å…¥
   from sagerag import TextLoader, CharacterSplitter, RAGPipeline
   ```

### è¿ç§»åçš„æ¸…æ™°æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         åº”ç”¨å±‚å·¥å…·ï¼ˆç‹¬ç«‹ PyPI åŒ…ï¼‰           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  isage-agentic  â”‚  isage-rag  â”‚  isage-*    â”‚
â”‚  (Agent æ¡†æ¶)   â”‚  (RAG å·¥å…·) â”‚  (å…¶ä»–)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†‘
                      â”‚ depends on
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          SAGE ä¸­é—´ä»¶å±‚ï¼ˆç¼–æ’å±‚ï¼‰             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         sage-middleware (operators)         â”‚
â”‚   (é‡å¯¼å‡º + ç®¡é“ç¼–æ’ + ä¸šåŠ¡é€»è¾‘)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†‘
                      â”‚ depends on
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        SAGE åŸºç¡€å·¥å…·å±‚ï¼ˆç´§è€¦åˆï¼‰             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           sage-libs (foundation)            â”‚
â”‚  dataops/ safety/ privacy/ integrations/    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## â“ å¾…å†³ç­–é—®é¢˜

1. **æ˜¯å¦å¤–è¿ RAG**ï¼Ÿ

   - A. å¤–è¿ï¼ˆæ¨èï¼Œä¿æŒä¸€è‡´æ€§ï¼‰
   - B. ä¿ç•™ï¼ˆéœ€è¦æ’¤é”€ agentic å¤–è¿ï¼‰

1. **å¦‚æœå¤–è¿ï¼Œæ˜¯å¦éœ€è¦å‘åå…¼å®¹**ï¼Ÿ

   - A. ä¸éœ€è¦ï¼ˆæ¨èï¼Œæ¸…æ™°è¿ç§»ï¼‰
   - B. éœ€è¦ï¼ˆä¿ç•™ rag.py å…¼å®¹å±‚ï¼‰

1. **æ—¶é—´çº¿**ï¼Ÿ

   - æ–¹æ¡ˆ A: 1-2 å¤©å®Œæˆ RAG å¤–è¿
   - æ–¹æ¡ˆ B: 0.5-1 å¤©æ’¤é”€ agentic å¤–è¿

## ğŸ“ æˆ‘çš„å»ºè®®

**é€‰æ‹©æ–¹æ¡ˆ Aï¼ˆä¸¤è€…éƒ½å¤–è¿ï¼‰**ï¼Œç†ç”±ï¼š

1. **é€»è¾‘ä¸€è‡´æ€§**ï¼šåº”ç”¨å±‚å·¥å…·åº”è¯¥ç»Ÿä¸€å¤„ç†
1. **ç”¨æˆ·ä½“éªŒ**ï¼šæŒ‰éœ€å®‰è£…ï¼Œå‡å°‘ä¾èµ–
1. **é•¿æœŸç»´æŠ¤**ï¼šæ¸…æ™°çš„åŒ…è¾¹ç•Œ
1. **ç¤¾åŒºå¤ç”¨**ï¼šisage-rag å¯è¢«å…¶ä»–é¡¹ç›®ä½¿ç”¨

**æ³¨æ„**ï¼šè¿™æ„å‘³ç€ `sage-libs` å°†å˜æˆä¸€ä¸ª**è½»é‡çš„åŸºç¡€å·¥å…·åŒ…**ï¼Œä¸»è¦åŒ…å«ï¼š

- `dataops/` - æ•°æ®å¤„ç†å·¥å…·
- `safety/` - å®‰å…¨æ£€æŸ¥
- `privacy/` - éšç§ä¿æŠ¤
- `foundation/` - åŸºç¡€å·¥å…·ç±»
- `integrations/` - ç¬¬ä¸‰æ–¹é›†æˆé€‚é…å™¨

è¿™ä¸ SAGE Copilot Instructions ä¸­çš„ **"sage-libs ä¸ä¼šè¢«æ¸…ç©º"** åŸåˆ™ä¸€è‡´ã€‚
