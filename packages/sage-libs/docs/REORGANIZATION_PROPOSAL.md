# sage-libs é‡ç»„ï¼ˆå»ºè®®æ–¹æ¡ˆï¼‰

ç›®çš„ï¼šåœ¨ä¿è¯å¯ç»´æŠ¤æ€§å’Œç”¨æˆ·ä½“éªŒçš„å‰æä¸‹ï¼Œæ•´ç† \`sage-l## ä¸‰ã€å»ºè®®çš„åŒ…åˆ’åˆ†ï¼ˆæœ€ç»ˆç›®æ ‡ï¼‰

**ğŸš¨ é‡è¦å‘ç°ï¼šå½“å‰åˆ’åˆ†å­˜åœ¨é€»è¾‘ä¸ä¸€è‡´ï¼**

- Agent å·¥å…·ï¼ˆagentic/ï¼‰å·²å¤–è¿ â†’ `isage-agentic`
- RAG å·¥å…·ï¼ˆrag/ï¼‰è®¡åˆ’ä¿ç•™ â†’ ç•™åœ¨ `sage-libs`

**é—®é¢˜**ï¼šä¸¤è€…åœ¨åº”ç”¨å±‚çº§ã€LLM ä¾èµ–ã€SAGE è€¦åˆåº¦ã€å¤ç”¨æ€§ç­‰ç»´åº¦å®Œå…¨ç›¸åŒï¼Œåº”è¯¥ä½¿ç”¨ç›¸åŒçš„åˆ’åˆ†ç­–ç•¥ã€‚

**è¯¦ç»†åˆ†æ**ï¼šè§ `REORGANIZATION_ANALYSIS.md`

è¯´æ˜ï¼šä¼˜å…ˆä¿å®ˆæ‹†åˆ†ï¼Œæ¨èæŒ‰"æ ¸å¿ƒ + å¯é€‰å­åŒ…"ç­–ç•¥ï¼ˆæ··åˆæ–¹æ¡ˆï¼‰ã€‚

**æ¨èï¼šæ–¹æ¡ˆ A - ä¸¤è€…éƒ½å¤–è¿ï¼ˆä¿æŒä¸€è‡´æ€§ï¼‰**`çš„æ¨¡å—è¾¹ç•Œï¼Œç¡®å®šå“ªäº›å­æ¨¡å—ä¿ç•™åœ¨`sage-libs\` ä¸­ã€å“ªäº›å¤–è¿ä¸ºç‹¬ç«‹ PyPI ä»“åº“ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡å¯é€‰ä¾èµ–å®ç°æŒ‰éœ€å®‰è£…ã€‚

æœ¬æ–‡ä¸ºå»ºè®®è‰æ¡ˆï¼ŒåŒ…å«æ¨¡å—æ˜ å°„ã€å¯é€‰ä¾èµ–é…ç½®ã€è¿ç§»é¡ºåºä¸æ—¶é—´è¡¨ã€å…¼å®¹ç­–ç•¥ï¼ˆå¯é€‰ï¼‰ã€‚

**ğŸ¯ æ ¸å¿ƒåŸåˆ™ï¼šsage-libs ä¸ä¼šè¢«æ¸…ç©ºï¼å®ƒå°†ä¿ç•™ä¸ SAGE æ¡†æ¶ç´§å¯†è€¦åˆçš„æ ¸å¿ƒå·¥å…·æ¨¡å—ã€‚**

______________________________________________________________________

## é›¶ã€å¿«é€Ÿæ€»è§ˆï¼ˆTL;DRï¼‰

**âœ… ä¿ç•™åœ¨ sage-libs** (æ ¸å¿ƒå·¥å…·ï¼Œç´§å¯†è€¦åˆ):

- `dataops/`, `rag/`, `safety/`, `privacy/`, `integrations/`, `foundation/`, `ann/`

**ğŸ”„ å·²å¤–è¿ä¸ºç‹¬ç«‹åŒ…** (å¯ç‹¬ç«‹å¤ç”¨):

- `agentic/` â†’ `isage-agentic`
- `anns/` â†’ `isage-anns`
- `amms/` â†’ `isage-amms`
- `finetune/` â†’ `isage-finetune`

**ğŸ“¦ æœªæ¥å¯é€‰å¤–è¿** (æŒ‰éœ€):

- `sias/`, `intent/`, `workflow/`

______________________________________________________________________

## ä¸€ã€æ€»ä½“åŸåˆ™

- ä¼˜å…ˆä¿æŒè¯­ä¹‰ä¸Šç´§å¯†è€¦åˆçš„æ¨¡å—åœ¨åŒä¸€ä¸ªåŒ…å†…ã€‚å¯é€‰åŠŸèƒ½é€šè¿‡ `extras`ï¼ˆpyproject `[project.optional-dependencies]`ï¼‰æš´éœ²ã€‚
- å¯¹äºå¯ä»¥ç‹¬ç«‹å¤ç”¨çš„ç®—æ³•/å®ç°ï¼Œä¼˜å…ˆå¤–éƒ¨åŒ–ä¸ºå•ç‹¬åŒ…ï¼ˆæœ‰åŠ©äºç‹¬ç«‹å‘å¸ƒå’Œæ›´å¿«è¿­ä»£ï¼‰ã€‚
- ä¿æŒ SAGE ä¸­çš„æ¥å£/åè®®ç¨³å®šï¼ˆå¦‚æœéœ€è¦å¯ä½¿ç”¨è½»é‡å…¼å®¹å±‚æˆ–æ¥å£åŒ…ï¼‰ã€‚
- å¤–è¿å‰å‡†å¤‡ï¼šå®Œæ•´ READMEã€pyprojectã€LICENSEã€åŸºç¡€ CIã€å¯¼å‡ºå…¬å…± API åˆ—è¡¨ã€‚

______________________________________________________________________

## äºŒã€å½“å‰ä¸»è¦å­æ¨¡å—ï¼ˆæ¥è‡ª `packages/sage-libs/src/sage/libs/`ï¼‰

- `agentic/` (agent æ¡†æ¶ã€è§„åˆ’ã€å·¥å…·é€‰æ‹©ã€runtimeã€bots)
- `anns/` (å·²å¤–è¿ä¸º isage-anns)
- `amms/` (å·²å¤–è¿ä¸º isage-amms)
- `finetune/` (å·²å¤–è¿ä¸º isage-finetune)
- `sias/` (Sample-Importance-Aware Selection)
- `workflow/` (å·¥ä½œæµç”Ÿæˆå’Œä¼˜åŒ–)
- `intent/` (æ„å›¾è¯†åˆ«)
- `dataops/` (æ•°æ®æ“ä½œå·¥å…·)
- `rag/`, `integrations/`, `safety/`, `privacy/`, `eval/`, `reasoning/` ç­‰

______________________________________________________________________

## ä¸‰ã€å»ºè®®çš„åŒ…åˆ’åˆ†ï¼ˆæœ€ç»ˆç›®æ ‡ï¼‰

è¯´æ˜ï¼šä¼˜å…ˆä¿å®ˆæ‹†åˆ†ï¼Œæ¨èæŒ‰â€œæ ¸å¿ƒ + å¯é€‰å­åŒ…â€ç­–ç•¥ï¼ˆæ··åˆæ–¹æ¡ˆï¼‰ã€‚

1. isage-agentic (å·²åˆ›å»º: `sage-agentic`)

   - åŒ…å«ï¼š`agentic/` ä¸­çš„æ ¸å¿ƒæ¨¡å—
     - `interface/`, `interfaces/`, `registry/`ï¼ˆåè®®ä¸æ³¨å†Œï¼‰
     - `agents/`ï¼ˆruntime, planning, action/tool-selection, botsï¼‰
     - `workflow/`ï¼ˆå·¥ä½œæµ orchestrator + generators + optimizersï¼‰
     - `eval/`ï¼ˆagent evaluation & telemetryï¼‰
     - `reasoning/`ï¼ˆç”¨äº planning çš„æ¨ç†å·¥å…·ï¼‰
   - extras:
     - `[planning]` (å¦‚æœéœ€è¦å¯æ‹†ä¸º extrasï¼ŒåŒ…å« heavier dependencies)
     - `[tool-selection]` (embedding/ann clients)
     - `[llm]` (openai/anthropic client helpers)

1. **isage-rag** (æ–°å»ºè®®ï¼Œä¸ agentic å¯¹ç§°)

   - åŒ…å«ï¼š`rag/` ä¸­çš„æ ¸å¿ƒæ¨¡å—
     - `document_loaders/`ï¼ˆæ–‡æ¡£åŠ è½½ï¼šTextLoader, PDFLoader, DocxLoader, MarkdownLoaderï¼‰
     - `chunk/`ï¼ˆæ–‡æœ¬åˆ†å—ï¼šCharacterSplitter, SentenceTransformersTokenTextSplitterï¼‰
     - `types/`ï¼ˆç±»å‹å®šä¹‰ï¼šRAGDocument, RAGQuery, RAGResponseï¼‰
     - `pipeline/`ï¼ˆRAG ç®¡é“ç¼–æ’ï¼‰
   - ç†ç”±ï¼š
     - ä¸ agentic åŒç­‰çº§åˆ«çš„åº”ç”¨å±‚å·¥å…·
     - å¯è¢«é SAGE é¡¹ç›®ä½¿ç”¨ï¼ˆä»»ä½•éœ€è¦ RAG çš„é¡¹ç›®ï¼‰
     - ä¸å¼ºä¾èµ– SAGE kernel/platform å±‚
     - å½“å‰åœ¨ `sage-middleware/operators/rag/` ä¸­åªæ˜¯é‡å¯¼å‡º
   - extras:
     - `[retrieval]` (vector database clients: Chroma, Milvus)
     - `[generation]` (LLM clients: OpenAI, HuggingFace)
     - `[evaluation]` (RAG metrics: F1, RougeL, BRS)

1. isage-sias (å¯é€‰ç‹¬ç«‹åŒ…)

   - åŒ…å«ï¼š`sias/`ï¼ˆcontinual learner, coreset selection, typesï¼‰
   - ç†ç”±ï¼šé€šç”¨é‡‡æ ·/é‡è¦æ€§é€‰æ‹©ç®—æ³•ï¼Œå¯è¢«é agentic åœºæ™¯å¤ç”¨

1. isage-intent (å¯é€‰ç‹¬ç«‹åŒ…)

   - åŒ…å«ï¼š`intent/`ï¼ˆkeyword recognizer, llm recognizer, classifierï¼‰
   - ç†ç”±ï¼šå¯¹è¯ç³»ç»Ÿä¸æ£€ç´¢ç³»ç»Ÿä¹Ÿä¼šä½¿ç”¨æ„å›¾è¯†åˆ«ï¼Œç‹¬ç«‹åŒ…æé«˜å¯å¤ç”¨æ€§

1. isage-workflow (å¯é€‰)

   - åŒ…å«ï¼š`workflow/`ã€`workflows/`ï¼ˆå¦‚æœéœ€è¦ç‹¬ç«‹éƒ¨ç½²å·¥ä½œæµå¼•æ“ï¼‰
   - ç†ç”±ï¼šå·¥ä½œæµå¼•æ“å¯ä½œä¸ºç‹¬ç«‹ç¼–æ’å±‚è¢«å…¶ä»–é¡¹ç›®ä½¿ç”¨

1. sage-libs ä¿ç•™ (æ ¸å¿ƒå·¥å…·é›†åˆåŒ…)

   - **ä¿ç•™åœ¨ sage-libs ä¸­** (ä¸ SAGE æ¡†æ¶ç´§å¯†è€¦åˆï¼Œä¸æ˜“ç‹¬ç«‹):

     - `dataops/` - æ•°æ®æ“ä½œå·¥å…· (DataFrame/Dataset å¤„ç†)
     - `rag/` - RAG ç›¸å…³å·¥å…· (æ–‡æ¡£åŠ è½½ã€åˆ†å—ã€ç´¢å¼•)
     - `safety/` - å®‰å…¨æ£€æŸ¥ (è¾“å…¥éªŒè¯ã€å†…å®¹è¿‡æ»¤)
     - `privacy/` - éšç§ä¿æŠ¤ (æ•°æ®è„±æ•ã€åŒ¿ååŒ–)
     - `integrations/` - ç¬¬ä¸‰æ–¹é›†æˆ (LangChain, OpenAI, etc.)
     - `foundation/` - åŸºç¡€å·¥å…· (é…ç½®ã€æ—¥å¿—ã€å·¥å…·ç±»)
     - `ann/` - ANN æ¥å£æŠ½è±¡å±‚ (ç»Ÿä¸€æ¥å£ï¼Œå®ç°åœ¨ isage-anns)

   - **å·²å¤–è¿ä¸ºç‹¬ç«‹åŒ…**:

     - `agentic/` â†’ `isage-agentic` (Agent æ¡†æ¶)
     - `anns/` â†’ `isage-anns` (ANN ç®—æ³•å®ç°)
     - `amms/` â†’ `isage-amms` (è¿‘ä¼¼çŸ©é˜µä¹˜)
     - `finetune/` â†’ `isage-finetune` (æ¨¡å‹å¾®è°ƒ)

   - **æœªæ¥å¯é€‰å¤–è¿** (å¦‚æœ‰éœ€æ±‚):

     - `sias/` â†’ `isage-sias` (Sample-Importance-Aware Selection)
     - `intent/` â†’ `isage-intent` (æ„å›¾è¯†åˆ«)
     - `workflow/` â†’ `isage-workflow` (å·¥ä½œæµç¼–æ’)

______________________________________________________________________

## å››ã€æ¨è `pyproject.toml` extrasï¼ˆç¤ºä¾‹ï¼‰

åœ¨ `packages/sage-libs/pyproject.toml` æˆ– `packages/<package>/pyproject.toml` ä¸­æ·»åŠ ï¼š

```toml
[project.optional-dependencies]
agentic = ["isage-agentic>=0.1.0"]
sias = ["isage-sias>=0.1.0"]
intent = ["isage-intent>=0.1.0"]n
workflow = ["isage-workflow>=0.1.0"]
all = [
    "isage-agentic>=0.1.0",
    "isage-sias>=0.1.0",
    "isage-intent>=0.1.0",
    "isage-workflow>=0.1.0",
]
```

è¯´æ˜ï¼š`all` ç”¨äºå¼€å‘ä¸ CI è·‘å…¨å¥—æµ‹è¯•ï¼›ç”¨æˆ·å®‰è£…æ—¶å¯æŒ‰éœ€é€‰æ‹©ã€‚

______________________________________________________________________

## äº”ã€è¿ç§»æ­¥éª¤ï¼ˆå»ºè®®é¡ºåºï¼‰

é˜¶æ®µ 0: è®¨è®º & ç¡®è®¤ï¼ˆå½“å‰ï¼‰

- ç›®æ ‡ï¼šç¡®è®¤åˆ†åŒ…è¾¹ç•Œã€package åç§°ã€extras åˆ—è¡¨

é˜¶æ®µ 1: å‡†å¤‡ç‹¬ç«‹åŒ…æ¨¡æ¿ï¼ˆå¹¶è¡Œå¯åšï¼‰

- ä¸ºæ¯ä¸ªè¦ç‹¬ç«‹çš„æ¨¡å—åˆ›å»ºä»“åº“æ¨¡æ¿ï¼š`pyproject.toml`, `README.md`, `LICENSE`, `setup.py`,
  `.github/workflows/python.yml`
- æå–å¹¶æ•´ç†å…¬å…± APIï¼ˆexport listï¼‰ã€ç¤ºä¾‹ä»£ç ä¸ docs

é˜¶æ®µ 2: ä»£ç è¿ç§»ï¼ˆé€åŒ…ï¼‰

- å¤åˆ¶æ¨¡å—ä»£ç åˆ°ä¸´æ—¶ç›®å½•ï¼Œæ•´ç† importsï¼ˆç›¸å¯¹æ”¹æˆåŒ…å†…å¯¼å…¥ï¼‰ã€æ›´æ–°åŒ…å/æ¨¡å—å
- æ·»åŠ  CI (pytest matrix), ruff, mypy (å¯é€‰)
- Commit + push -> GitHub repo creation (ä½¿ç”¨ `gh repo create ... --source`)

é˜¶æ®µ 3: SAGE ä»“åº“è°ƒæ•´

- åˆ é™¤åŸç›®å½•ï¼ˆæˆ–ä¿ç•™ç©ºçš„å…¼å®¹å±‚ï¼Œè§†æ˜¯å¦éœ€è¦åå‘å…¼å®¹ï¼‰
- åœ¨ `sage-libs` ä¸­æ·»åŠ  `pyproject.toml` extrasï¼ˆæŒ‡å‘æ–°åŒ…åï¼‰
- æ›´æ–° `packages/sage-libs/README.md` æ–‡æ¡£å’Œ `docs-public/` çš„å¼•ç”¨

é˜¶æ®µ 4: å‘å¸ƒä¸éªŒè¯

- åœ¨ testpypi ä¸Šå‘å¸ƒ `isage-*` åŒ…ï¼Œè¿è¡Œé›†æˆæµ‹è¯•
- åœ¨ SAGE CI ä¸­åˆ‡æ¢åˆ°å®‰è£… `isage-*` åŒ…å¹¶è¿è¡Œå®Œæ•´æµ‹è¯•çŸ©é˜µ
- å‘å¸ƒåˆ° PyPIï¼ˆå¯é€‰ï¼‰

é˜¶æ®µ 5: ç›‘æ§ä¸æ¸…ç†

- ç›‘æ§ä¾èµ–é—®é¢˜ã€ç”¨æˆ·åé¦ˆ
- åˆ é™¤å…¼å®¹ä»£ç æˆ–æ ‡æ³¨å¼ƒç”¨

______________________________________________________________________

## å…­ã€æ—¶é—´çº¿ï¼ˆç¤ºä¾‹ï¼ŒæŒ‰åŒ…ä¼°ç®—ï¼‰

- å‡†å¤‡æ¨¡æ¿ + docs: 1-2 å¤©
- è¿ç§»å¹¶åˆ›å»ºä»“åº“ï¼ˆå•åŒ…ï¼‰ï¼š0.5-1 å¤©
- CI + æµ‹è¯•æ•´åˆï¼ˆå•åŒ…ï¼‰ï¼š0.5-1 å¤©
- SAGE side updates + tests: 0.5-1 å¤©

è‹¥å¹¶è¡Œå¤„ç†å¤šä¸ªåŒ…ï¼ˆ2-3 äººï¼‰ï¼Œæ•´ä¸ªå¤–è¿ï¼ˆagentic + sias + intentï¼‰å¯åœ¨ 3-7 å¤©å†…å®Œæˆã€‚

______________________________________________________________________

## ä¸ƒã€å…¼å®¹æ€§ç­–ç•¥ï¼ˆå¯é€‰ï¼‰

- å¦‚æœä¸éœ€è¦å‘åå…¼å®¹ï¼šç›´æ¥åˆ é™¤æ—§ç›®å½•å¹¶å°†æ‰€æœ‰å¼•ç”¨æ”¹ä¸ºæ–°çš„åŒ…åï¼ˆæ¨èç®€å•æ¸…æ™°ï¼‰
- å¦‚æœéœ€è¦é€æ­¥è¿ç§»ï¼šä¿ç•™è½»é‡çš„å…¼å®¹å±‚ `sage.libs.<mod>`ï¼Œåœ¨å¯¼å…¥æ—¶æŠ›å‡º DeprecationWarningï¼ŒæŒ‡å‘ `isage-*` åŒ…

______________________________________________________________________

## å…«ã€ä¸‹ä¸€æ­¥å»ºè®®ï¼ˆè¯·é€‰ä¸€é¡¹ï¼‰

- A. æŒ‰ç…§æœ¬è‰æ¡ˆï¼ŒæŠŠ `isage-agentic` ä¿æŒä¸ºå®Œæ•´åŒ…ï¼Œå¦å¤–å°† `sias` å’Œ `intent` ä½œä¸ºå¯é€‰ç‹¬ç«‹ä»“åº“ï¼ˆæ¨èï¼‰
- B. å…¨éƒ¨ä¿ç•™åœ¨ `isage-agentic`ï¼ˆç®€å•ï¼‰ï¼Œä»¥åå†æ‹†åˆ†
- C. æŒ‰æ¨¡å—ç»†åˆ†ï¼ˆå¤æ‚ï¼Œéœ€æ›´å¤šç»´æŠ¤ï¼‰

è¯·å›å¤ä½ é€‰æ‹© A/B/Cï¼Œæˆ–å¯¹ä¸Šé¢çš„åŒ…è¾¹ç•Œå’Œ extras è¿›è¡Œå…·ä½“è°ƒæ•´ã€‚æˆ‘æ”¶åˆ°ç¡®è®¤åä¼šæ‰§è¡Œå¯¹åº”çš„è¿ç§»æ­¥éª¤ï¼ˆåˆ›å»ºä»“åº“ã€å¤åˆ¶ä»£ç ã€æ›´æ–° SAGEï¼‰ã€‚
