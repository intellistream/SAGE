# 构建约束文件 - 避免已知的构建问题
# 专门用于解决 outlines_core 和 xformers 等包的构建失败

# === PyTorch 生态系统 ===
torch==2.7.1
torchvision==0.22.1
torchaudio==2.7.1  # 如果需要

# === 结构化生成包 ===
# outlines 及其依赖
outlines==1.2.1
# 注意：outlines_core 通常由 outlines 自动安装，不直接指定

# === Transformer 优化包 ===
# xformers - 使用与 PyTorch 2.7.1 兼容的版本
xformers>=0.0.28,<0.1.0

# === Rust 构建的包（优先二进制） ===
tokenizers==0.21.4
safetensors>=0.4.0

# === 构建工具版本 ===
setuptools>=68.0.0,<70.0.0
wheel>=0.41.0,<1.0.0
build>=1.0.0,<2.0.0
pip>=23.0.0

# === Rust 构建支持 ===
setuptools-rust>=1.6.0
maturin>=1.0.0

# === C++ 构建支持 ===
pybind11>=2.11.0
cmake>=3.20.0

# === 避免冲突的核心依赖 ===
numpy==2.2.6
scipy==1.15.3

# === 其他可能有构建问题的包 ===
# 强制使用特定版本避免构建问题
grpcio==1.74.0  # 避免编译问题
Pillow>=10.0.0  # 确保二进制可用
lxml>=4.9.0     # 避免 libxml2 编译问题
