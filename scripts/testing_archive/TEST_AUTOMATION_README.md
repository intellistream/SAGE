# SAGE ä¸€é”®è‡ªåŠ¨åŒ–æµ‹è¯•ç³»ç»Ÿ

è¿™ä¸ªæµ‹è¯•ç³»ç»Ÿä¸º SAGE é¡¹ç›®æä¾›äº†å®Œæ•´çš„è‡ªåŠ¨åŒ–æµ‹è¯•è§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ç¯å¢ƒç®¡ç†ã€æ™ºèƒ½æµ‹è¯•ã€å¹¶è¡Œæ‰§è¡Œå’Œè¯¦ç»†æŠ¥å‘Šã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åŸºæœ¬ä½¿ç”¨

```bash
# é»˜è®¤æ¨¡å¼ï¼šç¯å¢ƒæ£€æŸ¥ + å¿«é€Ÿæµ‹è¯• + æŠ¥å‘Š
./quick_test.sh

# æˆ–ä½¿ç”¨ Python ç‰ˆæœ¬
python run_all_tests.py
```

### 2. äº¤äº’å¼èœå•ï¼ˆæ¨èæ–°æ‰‹ä½¿ç”¨ï¼‰

```bash
./quick_test.sh --interactive
```

### 3. å¸¸ç”¨æµ‹è¯•æ¨¡å¼

```bash
# å¿«é€Ÿæµ‹è¯•ï¼ˆé€‚åˆæ—¥å¸¸å¼€å‘ï¼‰
./quick_test.sh --quick

# å®Œæ•´æµ‹è¯•å¥—ä»¶ï¼ˆé€‚åˆæäº¤å‰ï¼‰
./quick_test.sh --full --workers 8

# æ™ºèƒ½å·®å¼‚æµ‹è¯•ï¼ˆä»…æµ‹è¯•ä¿®æ”¹ç›¸å…³çš„ä»£ç ï¼‰
./quick_test.sh --diff

# GitHub Actions æœ¬åœ°æ¨¡æ‹Ÿ
./quick_test.sh --github
```

## ğŸ“‹ åŠŸèƒ½ç‰¹æ€§

### ğŸ”§ è‡ªåŠ¨åŒ–æµ‹è¯•åŠŸèƒ½
- âœ… **æ™ºèƒ½æµ‹è¯•å‘ç°**: è‡ªåŠ¨æ‰«æé¡¹ç›®ä¸­çš„æ‰€æœ‰æµ‹è¯•æ–‡ä»¶
- âœ… **å¹¶è¡Œæ‰§è¡Œ**: æ”¯æŒå¤šæ ¸å¹¶è¡Œæµ‹è¯•ï¼Œæå‡æ‰§è¡Œæ•ˆç‡
- âœ… **å·®å¼‚åŒ–æµ‹è¯•**: åŸºäº git diff åªè¿è¡Œç›¸å…³æµ‹è¯•
- âœ… **ç¯å¢ƒç®¡ç†**: è‡ªåŠ¨æ£€æŸ¥å’Œè®¾ç½® Python è™šæ‹Ÿç¯å¢ƒ
- âœ… **è¯¦ç»†æ—¥å¿—**: ä¸ºæ¯ä¸ªæµ‹è¯•æ–‡ä»¶ç”Ÿæˆç‹¬ç«‹çš„æ‰§è¡Œæ—¥å¿—

### ğŸ“Š æŠ¥å‘Šå’Œç›‘æ§
- âœ… **æµ‹è¯•æŠ¥å‘Š**: è‡ªåŠ¨ç”Ÿæˆ Markdown æ ¼å¼çš„è¯¦ç»†æŠ¥å‘Š
- âœ… **æ€§èƒ½ç»Ÿè®¡**: æ˜¾ç¤ºæ‰§è¡Œæ—¶é—´ã€æˆåŠŸç‡ç­‰æŒ‡æ ‡
- âœ… **ç¯å¢ƒä¿¡æ¯**: è®°å½•ç³»ç»Ÿç¯å¢ƒå’Œä¾èµ–çŠ¶æ€
- âœ… **å®æ—¶è¿›åº¦**: æµ‹è¯•æ‰§è¡Œæ—¶æ˜¾ç¤ºå®æ—¶è¿›åº¦æ¡

### ğŸ­ GitHub Actions é›†æˆ
- âœ… **æœ¬åœ°æ¨¡æ‹Ÿ**: ä½¿ç”¨ act å·¥å…·æœ¬åœ°è¿è¡Œ GitHub Actions
- âœ… **å·¥ä½œæµéªŒè¯**: åœ¨æäº¤å‰éªŒè¯ CI/CD æµç¨‹
- âœ… **å¤šå·¥ä½œæµæ”¯æŒ**: æ”¯æŒé¡¹ç›®ä¸­çš„æ‰€æœ‰å·¥ä½œæµæ–‡ä»¶

## ğŸ“‚ æ–‡ä»¶ç»“æ„

```
SAGE æµ‹è¯•ç³»ç»Ÿ/
â”œâ”€â”€ run_all_tests.py          # Python ä¸»æµ‹è¯•è„šæœ¬ï¼ˆåŠŸèƒ½æœ€å…¨ï¼‰
â”œâ”€â”€ quick_test.sh             # Bash å¿«æ·è„šæœ¬ï¼ˆå¿«é€Ÿå¯åŠ¨ï¼‰
â”œâ”€â”€ test_config.toml          # æµ‹è¯•é…ç½®æ–‡ä»¶
â”œâ”€â”€ scripts/test_runner.py    # æ ¸å¿ƒæµ‹è¯•è¿è¡Œå™¨
â”œâ”€â”€ test_logs/                # æµ‹è¯•æ‰§è¡Œæ—¥å¿—
â”œâ”€â”€ test_reports/             # æµ‹è¯•æŠ¥å‘Šè¾“å‡º
â””â”€â”€ test_env/                 # Python è™šæ‹Ÿç¯å¢ƒ
```

## ğŸ› ï¸ è¯¦ç»†ä½¿ç”¨è¯´æ˜

### Python è„šæœ¬ (run_all_tests.py)

è¿™æ˜¯åŠŸèƒ½æœ€å®Œæ•´çš„è„šæœ¬ï¼Œæä¾›æ‰€æœ‰é«˜çº§åŠŸèƒ½ï¼š

```bash
# æŸ¥çœ‹æ‰€æœ‰é€‰é¡¹
python run_all_tests.py --help

# å„ç§æµ‹è¯•æ¨¡å¼
python run_all_tests.py --quick              # å¿«é€Ÿæµ‹è¯•
python run_all_tests.py --full --workers 8   # å®Œæ•´æµ‹è¯•ï¼Œ8ä¸ªå¹¶å‘
python run_all_tests.py --diff               # æ™ºèƒ½å·®å¼‚æµ‹è¯•
python run_all_tests.py --github-actions     # GitHub Actions æ¨¡æ‹Ÿ
python run_all_tests.py --report             # ä»…ç”ŸæˆæŠ¥å‘Š
python run_all_tests.py --interactive        # äº¤äº’å¼èœå•

# ç¯å¢ƒç®¡ç†
python run_all_tests.py --setup              # è®¾ç½®æµ‹è¯•ç¯å¢ƒ
```

### Bash è„šæœ¬ (quick_test.sh)

è½»é‡çº§è„šæœ¬ï¼Œé€‚åˆå¿«é€Ÿæ“ä½œï¼š

```bash
# æŸ¥çœ‹å¸®åŠ©
./quick_test.sh --help

# åŸºæœ¬æ“ä½œ
./quick_test.sh --check          # ç¯å¢ƒæ£€æŸ¥
./quick_test.sh --setup          # è®¾ç½®ç¯å¢ƒ
./quick_test.sh --quick          # å¿«é€Ÿæµ‹è¯•
./quick_test.sh --full           # å®Œæ•´æµ‹è¯•
./quick_test.sh --diff           # å·®å¼‚æµ‹è¯•
./quick_test.sh --github         # GitHub Actions æ¨¡æ‹Ÿ
./quick_test.sh --report         # ç”ŸæˆæŠ¥å‘Š
./quick_test.sh --interactive    # äº¤äº’å¼èœå•

# è‡ªå®šä¹‰å¹¶å‘æ•°
./quick_test.sh --full --workers 16
```

## âš™ï¸ é…ç½®è¯´æ˜

### æµ‹è¯•é…ç½® (test_config.toml)

é…ç½®æ–‡ä»¶åŒ…å«ä»¥ä¸‹ä¸»è¦éƒ¨åˆ†ï¼š

```toml
[test_suites]
# å®šä¹‰ä¸åŒçš„æµ‹è¯•å¥—ä»¶
quick_tests = ["sage/cli/tests/test_config_manager.py", ...]
core_tests = ["sage/core/", "sage/cli/", ...]

[test_config]
# æµ‹è¯•æ‰§è¡Œé…ç½®
default_workers = 4
max_workers = 8
test_timeout = 300

[paths]
# è·¯å¾„é…ç½®
project_root = "."
venv_path = "./test_env"
test_logs_dir = "./test_logs"
```

### ç¯å¢ƒè¦æ±‚

- **Python**: 3.11+
- **å…³é”®ä¾èµ–**: pytest, torch, ray, fastapi
- **å¯é€‰å·¥å…·**: act (GitHub Actions æœ¬åœ°è¿è¡Œ)
- **ç³»ç»Ÿ**: Linux/macOS (æ¨è)

## ğŸ“Š æµ‹è¯•æŠ¥å‘Š

æµ‹è¯•å®Œæˆåä¼šåœ¨ `test_reports/` ç›®å½•ä¸‹ç”Ÿæˆè¯¦ç»†æŠ¥å‘Šï¼š

```
test_reports/
â”œâ”€â”€ test_report_20250802_143022.md    # Markdown æŠ¥å‘Š
â””â”€â”€ test_report_20250802_143022.json  # JSON æ•°æ®
```

æŠ¥å‘ŠåŒ…å«ï¼š
- ğŸ“Š æ‰§è¡Œæ¦‚è§ˆï¼ˆæˆåŠŸç‡ã€è€—æ—¶ç­‰ï¼‰
- ğŸ—ï¸ ç¯å¢ƒä¿¡æ¯ï¼ˆPythonç‰ˆæœ¬ã€ä¾èµ–çŠ¶æ€ï¼‰
- ğŸ“ˆ æ€§èƒ½ç»Ÿè®¡ï¼ˆCPUã€å†…å­˜ä½¿ç”¨ï¼‰
- ğŸ“‹ æ¨èæ“ä½œï¼ˆå¦‚ä½•ä¿®å¤å¤±è´¥çš„æµ‹è¯•ï¼‰

## ğŸ” æ—¥å¿—æŸ¥çœ‹

æ¯ä¸ªæµ‹è¯•æ–‡ä»¶éƒ½æœ‰ç‹¬ç«‹çš„æ—¥å¿—ï¼š

```bash
# æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—æ–‡ä»¶
ls -la test_logs/

# æŸ¥çœ‹ç‰¹å®šæµ‹è¯•çš„æ—¥å¿—
cat test_logs/sage_cli_tests_test_config_manager.py.log

# æŸ¥çœ‹æœ€æ–°çš„æ—¥å¿—
ls -lt test_logs/*.log | head -5
```

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### æ—¥å¸¸å¼€å‘æµç¨‹

```bash
# 1. ä¿®æ”¹ä»£ç åï¼Œå¿«é€Ÿæ£€æŸ¥
./quick_test.sh --diff

# 2. æäº¤å‰å®Œæ•´éªŒè¯
./quick_test.sh --full

# 3. æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š
cat test_reports/test_report_*.md
```

### CI/CD é›†æˆ

```bash
# æœ¬åœ°éªŒè¯ GitHub Actions
./quick_test.sh --github

# æ¨¡æ‹Ÿå®Œæ•´ CI æµç¨‹
python run_all_tests.py --github-actions
```

### æ€§èƒ½ä¼˜åŒ–

```bash
# ä½¿ç”¨æ›´å¤šå¹¶å‘è¿›ç¨‹
./quick_test.sh --full --workers 16

# ç›‘æ§èµ„æºä½¿ç”¨
htop  # æŸ¥çœ‹ CPU ä½¿ç”¨
```

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **è™šæ‹Ÿç¯å¢ƒé—®é¢˜**
   ```bash
   ./quick_test.sh --setup  # é‡æ–°è®¾ç½®ç¯å¢ƒ
   ```

2. **ä¾èµ–ç¼ºå¤±**
   ```bash
   source test_env/bin/activate
   pip install -e .
   ```

3. **æµ‹è¯•å¤±è´¥**
   ```bash
   # æŸ¥çœ‹å…·ä½“é”™è¯¯
   cat test_logs/failed_test.log
   
   # é‡æ–°è¿è¡Œå•ä¸ªæµ‹è¯•
   pytest sage/specific/test_file.py -v
   ```

4. **Docker è¿æ¥é—®é¢˜**
   ```bash
   # æ£€æŸ¥ Docker çŠ¶æ€
   docker info
   
   # å¯åŠ¨ Docker æœåŠ¡
   sudo systemctl start docker
   ```

### æ€§èƒ½è°ƒä¼˜

- **è°ƒæ•´å¹¶å‘æ•°**: æ ¹æ® CPU æ ¸å¿ƒæ•°è®¾ç½® `--workers`
- **å†…å­˜é™åˆ¶**: åœ¨ `test_config.toml` ä¸­é…ç½®å†…å­˜é™åˆ¶
- **æ’é™¤æ…¢æµ‹è¯•**: åœ¨é…ç½®ä¸­æ·»åŠ æ’é™¤æ¨¡å¼

## ğŸ¤ è´¡çŒ®æŒ‡å—

å¦‚éœ€æ‰©å±•æµ‹è¯•ç³»ç»ŸåŠŸèƒ½ï¼š

1. ä¿®æ”¹ `run_all_tests.py` æ·»åŠ æ–°åŠŸèƒ½
2. æ›´æ–° `test_config.toml` æ·»åŠ é…ç½®é€‰é¡¹
3. æ›´æ–°æ­¤ README æ–‡æ¡£
4. æ·»åŠ ç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜è¯·ï¼š
1. æŸ¥çœ‹ `test_logs/` ä¸­çš„è¯¦ç»†æ—¥å¿—
2. è¿è¡Œ `./quick_test.sh --check` æ£€æŸ¥ç¯å¢ƒ
3. ä½¿ç”¨ `./quick_test.sh --interactive` äº¤äº’å¼è¯Šæ–­

---

ğŸ‰ **å¼€å§‹ä½¿ç”¨ SAGE ä¸€é”®è‡ªåŠ¨åŒ–æµ‹è¯•ç³»ç»Ÿï¼Œæå‡ä½ çš„å¼€å‘æ•ˆç‡ï¼**
