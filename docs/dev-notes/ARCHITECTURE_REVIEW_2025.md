# SAGE æ¶æ„å®¡æŸ¥ 2025-10-22

## å½“å‰åŒ…ç»“æ„å’Œä¾èµ–å…³ç³»

### æ¶æ„å±‚æ¬¡ï¼ˆç†æƒ³çŠ¶æ€ï¼‰

```
L6: sage-studio        (UI å±‚)
L5: sage-tools         (CLI å·¥å…·)
    sage-apps          (åº”ç”¨ç¤ºä¾‹)
    sage-benchmark     (æ€§èƒ½æµ‹è¯•)
L4: sage-middleware    (ä¸­é—´ä»¶ + é¢†åŸŸç®—å­)
L3: sage-libs          (ç®—æ³•åº“ + Agents)
    sage-kernel        (æ‰§è¡Œå¼•æ“ + åŸºç¡€ç®—å­)
L1: sage-common        (åŸºç¡€è®¾æ–½)
```

### å½“å‰ä¾èµ–åˆ†æ

#### âœ… L6: sage-studio
**ä¾èµ–**: common, kernel, middleware, libs
**é—®é¢˜**: 
- âŒ ä¾èµ–äº† libsï¼ˆåº”è¯¥åªä¾èµ– middlewareï¼‰
- âŒ å¯èƒ½æœ‰ä¸å¿…è¦çš„ kernel ç›´æ¥ä¾èµ–

**å»ºè®®**: Studio åº”è¯¥åªé€šè¿‡ middleware API è®¿é—®åŠŸèƒ½

#### âš ï¸ L5: sage-tools
**ä¾èµ–**: common, kernel, middleware, libs, apps, benchmark, studio
**é—®é¢˜**:
- âœ… ä½œä¸º CLI èšåˆå±‚ï¼Œä¾èµ–æ‰€æœ‰åŒ…æ˜¯åˆç†çš„
- âš ï¸ ä½†éœ€è¦ç¡®ä¿æ˜¯å¯é€‰ä¾èµ–

#### âš ï¸ L5: sage-apps  
**ä¾èµ–**: common, kernel, middleware, libs
**é—®é¢˜**:
- âŒ ä¾èµ– kernel å’Œ libsï¼ˆåº”è¯¥åªä¾èµ– middlewareï¼‰
- ç¤ºä¾‹åº”ç”¨åº”è¯¥å±•ç¤ºå¦‚ä½•é€šè¿‡ middleware ä½¿ç”¨ SAGE

#### âš ï¸ L5: sage-benchmark
**ä¾èµ–**: common, kernel, middleware, libs
**é—®é¢˜**:
- âŒ ä¾èµ– kernel å’Œ libsï¼ˆbenchmark å¯èƒ½éœ€è¦è¿™äº›ï¼‰
- âš ï¸ éœ€è¦è¯„ä¼°æ˜¯å¦çœŸçš„éœ€è¦ç›´æ¥ä¾èµ–åº•å±‚

#### âœ… L4: sage-middleware
**ä¾èµ–**: kernel (â†’ common)
**çŠ¶æ€**: âœ… ä¾èµ–å…³ç³»æ­£ç¡®

#### âš ï¸ L3: sage-libs
**ä¾èµ–**: middleware
**é—®é¢˜**:
- âŒ **ä¸¥é‡é—®é¢˜**: libs ä¸åº”è¯¥ä¾èµ– middlewareï¼
- libs åº”è¯¥æ˜¯ L3 å±‚ï¼Œmiddleware æ˜¯ L4 å±‚
- è¿™æ˜¯åå‘ä¾èµ–ï¼Œä¼šå¯¼è‡´å¾ªç¯

#### âœ… L3: sage-kernel
**ä¾èµ–**: common
**çŠ¶æ€**: âœ… ä¾èµ–å…³ç³»æ­£ç¡®

#### âœ… L1: sage-common
**ä¾èµ–**: æ—  SAGE å†…éƒ¨ä¾èµ–
**çŠ¶æ€**: âœ… ä¾èµ–å…³ç³»æ­£ç¡®

## å‘ç°çš„é—®é¢˜

### ğŸ”´ ä¸¥é‡é—®é¢˜ï¼šå¾ªç¯ä¾èµ–é£é™©

```
middleware â†’ kernel â†’ (åº”è¯¥ç‹¬ç«‹)
libs â†’ middleware  âŒ é”™è¯¯ï¼
```

**libs ä¸åº”è¯¥ä¾èµ– middleware**ï¼Œå› ä¸ºï¼š
1. libs æ˜¯ç®—æ³•åº“ï¼Œåº”è¯¥æ˜¯ç‹¬ç«‹çš„
2. middleware éœ€è¦ä½¿ç”¨ libs çš„ç®—æ³•
3. å½“å‰ä¾èµ–ä¼šé€ æˆ middleware â† libs â† middleware å¾ªç¯

### ğŸŸ¡ ä¸­ç­‰é—®é¢˜ï¼šä¸Šå±‚è¿‡åº¦ä¾èµ–åº•å±‚

#### Studio çš„é—®é¢˜
- Studio åº”è¯¥æ˜¯çº¯ UI å±‚
- ä¸åº”è¯¥ç›´æ¥ä¾èµ– libs æˆ– kernel
- åº”è¯¥é€šè¿‡ middleware çš„ API ä½¿ç”¨åŠŸèƒ½

#### Apps çš„é—®é¢˜  
- Apps æ˜¯ç¤ºä¾‹åº”ç”¨
- åº”è¯¥å±•ç¤ºå¦‚ä½•æ­£ç¡®ä½¿ç”¨ SAGE
- ä¸åº”è¯¥ç»•è¿‡ middleware ç›´æ¥ç”¨åº•å±‚

#### Benchmark çš„é—®é¢˜
- Benchmark å¯èƒ½éœ€è¦åº•å±‚è®¿é—®ï¼ˆæ€§èƒ½æµ‹è¯•ï¼‰
- ä½†åº”è¯¥æ˜ç¡®åŒºåˆ†å“ªäº›æ˜¯å¿…éœ€çš„

## ä¿®å¤è®¡åˆ’

### Phase 1: ä¿®å¤ libs ä¾èµ–ï¼ˆæœ€ç´§æ€¥ï¼‰

**å½“å‰**: `libs â†’ middleware`
**ç›®æ ‡**: `libs` ç‹¬ç«‹ï¼Œ`middleware â†’ libs`

**è¡ŒåŠ¨**:
1. æ£€æŸ¥ libs ä¸­ä½¿ç”¨ middleware çš„ä»£ç 
2. å°†è¿™äº›ä»£ç ç§»åˆ° middleware æˆ– apps
3. æ›´æ–° libs/pyproject.toml ç§»é™¤ middleware ä¾èµ–

### Phase 2: è§„èŒƒä¸Šå±‚ä¾èµ–

#### Studio
- ç§»é™¤ libs ä¾èµ–
- è¯„ä¼°æ˜¯å¦éœ€è¦ kernel ä¾èµ–
- é€šè¿‡ middleware API è®¿é—®åŠŸèƒ½

#### Apps  
- ç§»é™¤ä¸å¿…è¦çš„ kernel å’Œ libs ä¾èµ–
- ä½œä¸ºæœ€ä½³å®è·µç¤ºä¾‹ï¼Œåº”è¯¥åªç”¨ middleware

#### Benchmark
- ä¿ç•™å¿…è¦çš„åº•å±‚ä¾èµ–ï¼ˆæ€§èƒ½æµ‹è¯•éœ€è¦ï¼‰
- æ˜ç¡®æ ‡æ³¨ä¸º "æ€§èƒ½æµ‹è¯•ä¸“ç”¨"

### Phase 3: è¡¥å……æµ‹è¯•

æ¯ä¸ªåŒ…éƒ½åº”è¯¥æœ‰ï¼š
```
package/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ sage/
â”‚       â””â”€â”€ {package}/
â””â”€â”€ tests/
    â”œâ”€â”€ unit/
    â”œâ”€â”€ integration/
    â””â”€â”€ conftest.py
```

### Phase 4: æ›´æ–°æ–‡æ¡£

æ›´æ–°æ¶æ„å›¾å’Œä¾èµ–è¯´æ˜ã€‚

## æœŸæœ›çš„æœ€ç»ˆçŠ¶æ€

```
sage-studio â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â†“
sage-tools â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
sage-apps â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
sage-benchmark â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
                         â†“        â†“
                    sage-middleware
                         â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“                                  â†“
   sage-kernel                        sage-libs
        â†“                                  â†“
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
                  sage-common
```

**å…³é”®åŸåˆ™**:
1. å•å‘ä¾èµ–ï¼Œè‡ªä¸Šè€Œä¸‹
2. middleware æ˜¯ä¸Šå±‚çš„ç»Ÿä¸€å…¥å£
3. kernel å’Œ libs æ˜¯å¹³è¡Œçš„åº•å±‚
4. common æ˜¯æ‰€æœ‰åŒ…çš„åŸºç¡€

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. âœ… æ£€æŸ¥ sage-libs ä¸­å¯¹ middleware çš„ä½¿ç”¨
2. âš ï¸ è¿ç§»æˆ–é‡æ„è¿åä¾èµ–è§„åˆ™çš„ä»£ç 
3. âš ï¸ æ›´æ–°æ‰€æœ‰ pyproject.toml
4. âš ï¸ è¡¥å……æµ‹è¯•è¦†ç›–
5. âš ï¸ éªŒè¯æ¶æ„å¹¶æ›´æ–°æ–‡æ¡£
