# Studio Web UI 快速参考

## 🎯 微调模型操作速查

### 📍 在哪里操作？

**Finetune 面板** - 点击顶部导航栏的 "Finetune" 标签

### 🚀 核心操作

#### 1️⃣ 创建微调任务

```
位置：Finetune > 创建微调任务
步骤：
  1. 选择基础模型
  2. 上传数据集（JSON/JSONL）
  3. 配置参数（默认值适合 RTX 3060）
  4. 点击"创建任务"
```

#### 2️⃣ 监控训练进度

```
位置：Finetune > 微调任务列表
显示：
  ✅ 完成 - 绿色勾号
  🔄 训练 - 进度条 + 实时 loss
  ⏳ 排队 - 等待 GPU
  ❌ 失败 - 查看错误信息
```

#### 3️⃣ 切换模型（热切换 🔥）

```
位置：Finetune > 当前使用的模型
方式 A：下拉框选择
  1. 点击下拉框
  2. 选择模型（绿色标签 = 微调模型）
  3. 自动重启 LLM 服务
  4. 立即生效！✅

方式 B：任务列表快速切换
  1. 找到已完成的任务（✅状态）
  2. 点击"切换为对话后端"按钮
  3. 自动切换并重启
```

#### 4️⃣ 使用微调模型对话

```
步骤：
  1. 切换模型（见上）
  2. 点击顶部"Chat"标签
  3. 输入消息
  4. 享受微调模型的回答！💬
```

## 🎨 UI 元素说明

### 当前使用的模型卡片

```
┌─────────────────────────────────────────────────┐
│ 当前使用的模型                                   │
│ ┌─────────────────────────────────────────────┐ │
│ │ Qwen/Qwen2.5-0.5B-Instruct    [▼ 下拉框]   │ │
│ └─────────────────────────────────────────────┘ │
│                                                  │
│ 下拉框选项：                                      │
│ • 基础模型 [蓝色标签]                             │
│ • 微调模型 [绿色标签] ← 你的微调模型在这里！       │
└─────────────────────────────────────────────────┘
```

### 任务列表表格

```
┌──────┬─────────┬────────┬────────┬──────┬──────────────┐
│ ID   │ 模型    │ 状态   │ 进度   │ Loss │ 操作         │
├──────┼─────────┼────────┼────────┼──────┼──────────────┤
│ 001  │ Qwen..  │ ✅完成 │ 100%   │ 0.23 │ [切换为对话] │ ← 点这里快速切换
│ 002  │ Qwen..  │ 🔄训练 │ 67%    │ 0.45 │ [查看日志]   │ ← 实时查看训练
│ 003  │ Qwen..  │ ⏳排队 │ 0%     │ -    │ [取消]       │ ← 取消排队任务
└──────┴─────────┴────────┴────────┴──────┴──────────────┘
```

## 💡 提示信息解读

### 切换模型后的提示

| 提示 | 含义 | 操作 |
|------|------|------|
| ✅ **"模型已切换并生效"** | LLM 服务已重启，立即可用 | 直接去 Chat 对话 |
| ⚠️ **"模型已切换"** | 环境变量已更新，需重启 | 运行 `sage studio restart` |
| ❌ **"切换模型失败"** | 切换失败 | 检查模型路径是否存在 |

### 训练状态标识

| 图标 | 状态 | 说明 |
|------|------|------|
| ✅ | 完成 | 可以使用了！ |
| 🔄 | 训练中 | 查看实时进度 |
| ⏳ | 排队 | 等待 GPU 资源 |
| 📝 | 准备中 | 正在加载数据 |
| ❌ | 失败 | 点击查看错误详情 |
| 🚫 | 已取消 | 用户手动取消 |

## 🔥 常用场景速查

### 场景 1: 我刚微调完成，想立即试用

```
1. 在 Finetune 面板找到任务（状态：✅完成）
2. 点击"切换为对话后端"按钮
3. 切换到 Chat 标签
4. 开始对话！
```

**时间**：< 30 秒（含 LLM 服务重启）

### 场景 2: 我有多个模型，想对比效果

```
1. 在下拉框选择模型 A
2. 去 Chat 测试
3. 回到 Finetune，切换到模型 B
4. 去 Chat 再次测试
5. 对比效果
```

**时间**：每次切换 < 30 秒

### 场景 3: 模型表现不好，想换回基础模型

```
1. Finetune > 下拉框
2. 选择 Qwen/Qwen2.5-7B-Instruct [基础]
3. 自动切换
4. 继续使用
```

### 场景 4: 查看某个微调任务的详细信息

```
1. 在任务列表中找到任务
2. 点击任务 ID 或行（展开详情）
3. 查看：
   - 训练配置
   - 详细日志
   - 输出路径
   - 错误信息（如果失败）
```

## ⚡ 快捷操作

| 操作 | 快捷方式 |
|------|---------|
| 打开 Finetune 面板 | 顶部点击 "Finetune" |
| 打开 Chat 面板 | 顶部点击 "Chat" |
| 刷新任务列表 | 自动每 3 秒刷新 |
| 查看模型列表 | 点击下拉框 |
| 快速切换最新模型 | 任务列表第一行 > 切换按钮 |

## 🎯 最佳实践

### ✅ DO（推荐做法）

1. **使用下拉框切换** - 热切换，立即生效
2. **等待训练完成** - 看到 ✅ 状态再使用
3. **查看实时日志** - 监控训练是否正常
4. **在 Chat 中测试** - 切换后立即测试效果
5. **保留元数据** - 不要删除 finetune_meta.json

### ❌ DON'T（避免做法）

1. ~~手动编辑配置文件~~ - 用 UI 操作更安全
2. ~~训练中强制停止~~ - 使用"取消"按钮
3. ~~删除输出目录~~ - 会导致模型无法使用
4. ~~同时运行多个训练~~ - 会自动排队
5. ~~忘记检查 GPU~~ - 看顶部的 GPU 建议

## 🆘 故障排查

### 问题：下拉框没有我的微调模型

**检查**：
1. 任务状态是否为 ✅ 完成？
2. 刷新页面（F5）
3. 检查 `~/.sage/studio_finetune/` 目录

### 问题：切换模型后没反应

**检查**：
1. 看提示是 ✅ 还是 ⚠️？
2. 如果是 ⚠️，需要重启：`sage studio restart`
3. 检查浏览器控制台是否有错误

### 问题：模型加载失败

**检查**：
1. 模型文件是否完整？
2. GPU 内存是否足够？
3. 查看 Gateway 日志：`sage studio logs --gateway`

### 问题：训练一直排队

**原因**：
- 已有任务在训练（单 GPU 限制）
- 等待当前任务完成或取消

**解决**：
1. 查看当前训练任务
2. 等待完成或取消
3. 你的任务会自动开始

## 📚 相关文档

- [完整集成文档](./STUDIO_FINETUNE_INTEGRATION.md)
- [微调最佳实践](../../cross-layer/best-practices/FINETUNING.md)
- [CLI 命令参考](../../../DEVELOPER.md#微调命令)

## 🎉 总结

**在 Studio UI 中使用微调模型，只需 3 步：**

```
1. 微调 → 在 Finetune 面板创建任务
2. 切换 → 下拉框选择微调模型（自动热切换）
3. 使用 → 切换到 Chat 标签对话
```

**就是这么简单！** 🚀
