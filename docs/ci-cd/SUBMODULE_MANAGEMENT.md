# SAGE å­æ¨¡å—ç®¡ç†ç­–ç•¥

## ğŸ“‹ æ¦‚è¿°

ä¸ºäº†è§£å†³é¢‘ç¹çš„å­æ¨¡å—PRå†²çªé—®é¢˜ï¼Œæˆ‘ä»¬å»ºç«‹äº†stableåˆ†æ”¯ç­–ç•¥ã€‚

## ğŸŒ¿ åˆ†æ”¯ç­–ç•¥

### å­æ¨¡å—ä»“åº“åˆ†æ”¯:
- **`main`**: ç‹¬ç«‹å¼€å‘è€…çš„ä¸»åˆ†æ”¯ï¼Œæ—¥å¸¸å¼€å‘åœ¨æ­¤è¿›è¡Œ
- **`stable`**: ä¸»ä»“åº“è¿½è¸ªçš„ç¨³å®šåˆ†æ”¯ï¼Œå®šæœŸä»mainåˆå¹¶
- **`release/*`**: ç‰ˆæœ¬å‘å¸ƒåˆ†æ”¯ï¼ˆå¯é€‰ï¼‰

### ä¸»ä»“åº“è¿½è¸ª:
- ä¸»ä»“åº“çš„å­æ¨¡å—é…ç½®è¿½è¸ªå„å­æ¨¡å—çš„`stable`åˆ†æ”¯
- å‡å°‘å› é¢‘ç¹mainåˆ†æ”¯æ›´æ–°å¯¼è‡´çš„PRå†²çª

## ğŸ‘¥ å·¥ä½œæµç¨‹

### å¯¹äºç‹¬ç«‹å¼€å‘è€…ï¼ˆåœ¨å­æ¨¡å—ä»“åº“å·¥ä½œï¼‰:

1. **æ­£å¸¸å¼€å‘**:
   ```bash
   # åœ¨å­æ¨¡å—ä»“åº“ï¼ˆå¦‚sageDBï¼‰ä¸­
   git checkout main
   git pull origin main
   # æ­£å¸¸å¼€å‘ã€æäº¤ã€æ¨é€
   ```

2. **æ ‡è®°ç¨³å®šç‰ˆæœ¬**:
   ```bash
   # åŠŸèƒ½å®Œæˆåï¼Œåˆå¹¶åˆ°stableåˆ†æ”¯
   git checkout stable
   git merge main
   git push origin stable
   ```

3. **é€šçŸ¥åŒæ­¥**: é€šçŸ¥ä¸»ä»“åº“ç»´æŠ¤è€…è¿›è¡ŒåŒæ­¥

### å¯¹äºä¸»ä»“åº“ç»´æŠ¤è€…:

1. **æ£€æŸ¥å­æ¨¡å—çŠ¶æ€**:
   ```bash
   ./tools/maintenance/submodule_sync.sh status
   ```

2. **å®‰å…¨æ›´æ–°å­æ¨¡å—**:
   ```bash
   ./tools/maintenance/submodule_sync.sh update
   ```

3. **é”å®šç‰ˆæœ¬**ï¼ˆå‘å¸ƒå‰ï¼‰:
   ```bash
   ./tools/maintenance/submodule_sync.sh lock
   ```

## ğŸ› ï¸ å·¥å…·ä½¿ç”¨

### submodule_sync.sh è„šæœ¬

```bash
# æ£€æŸ¥æ‰€æœ‰å­æ¨¡å—çŠ¶æ€
./tools/maintenance/submodule_sync.sh status

# äº¤äº’å¼æ›´æ–°å­æ¨¡å—
./tools/maintenance/submodule_sync.sh update

# é”å®šå½“å‰ç‰ˆæœ¬
./tools/maintenance/submodule_sync.sh lock

# æ˜¾ç¤ºå¸®åŠ©
./tools/maintenance/submodule_sync.sh help
```

## ğŸ“¦ ç‰ˆæœ¬ç®¡ç†

### ç‰ˆæœ¬é”å®š
åœ¨é‡è¦ç‰ˆæœ¬å‘å¸ƒå‰ï¼Œä½¿ç”¨ç‰ˆæœ¬é”å®šåŠŸèƒ½:
```bash
./tools/maintenance/submodule_sync.sh lock
```

è¿™ä¼šç”Ÿæˆ`submodule-lock.json`æ–‡ä»¶ï¼Œè®°å½•ç¡®åˆ‡çš„å­æ¨¡å—ç‰ˆæœ¬ã€‚

### å›æ»šæ”¯æŒ
å¦‚æœéœ€è¦å›æ»šåˆ°ç‰¹å®šç‰ˆæœ¬:
```bash
# åŸºäºlockæ–‡ä»¶æ¢å¤ç‰¹å®šç‰ˆæœ¬ï¼ˆéœ€è¦æ‰‹åŠ¨å®ç°ï¼‰
git submodule update --init --recursive
```

## ğŸ”„ åŒæ­¥æ—¶æœº

### å»ºè®®çš„åŒæ­¥é¢‘ç‡:
- **æ—¥å¸¸å¼€å‘**: ä¸é¢‘ç¹æ›´æ–°å­æ¨¡å—
- **æ¯å‘¨åŒæ­¥**: å®šæœŸåŒæ­¥stableåˆ†æ”¯çš„æ›´æ–°
- **ç‰ˆæœ¬å‘å¸ƒå‰**: é”å®šæ‰€æœ‰å­æ¨¡å—ç‰ˆæœ¬
- **ç´§æ€¥ä¿®å¤**: æŒ‰éœ€åŒæ­¥å…³é”®ä¿®å¤

## ğŸš¨ æ³¨æ„äº‹é¡¹

1. **é¿å…ç›´æ¥åœ¨mainåˆ†æ”¯æ›´æ–°å­æ¨¡å—**: è¿™ä¼šå¯¼è‡´å…¶ä»–PRå†²çª
2. **ä½¿ç”¨è„šæœ¬ç®¡ç†**: é€šè¿‡`submodule_sync.sh`è€Œéæ‰‹åŠ¨æ“ä½œ
3. **æ¸…æ™°çš„æäº¤ä¿¡æ¯**: å­æ¨¡å—æ›´æ–°è¦æœ‰æ¸…æ™°çš„è¯´æ˜
4. **åè°ƒæ²Ÿé€š**: å¤§çš„å­æ¨¡å—æ›´æ–°å‰è¦ä¸å›¢é˜Ÿåè°ƒ

## ğŸ¯ é¢„æœŸæ•ˆæœ

- âœ… **å‡å°‘PRå†²çª**: ä¸å†é¢‘ç¹æ›´æ–°å­æ¨¡å—
- âœ… **ç‹¬ç«‹å¼€å‘**: å¼€å‘è€…å¯ä»¥åœ¨å„è‡ªä»“åº“æ­£å¸¸å·¥ä½œ
- âœ… **è§„èŒƒç®¡ç†**: æ ‡å‡†åŒ–çš„åŒæ­¥æµç¨‹
- âœ… **ç‰ˆæœ¬æ§åˆ¶**: æ”¯æŒé”å®šå’Œå›æ»š
- âœ… **æå‡æ•ˆç‡**: å‡å°‘åˆå¹¶å†²çªçš„å¤„ç†æ—¶é—´

## ğŸ“š ç›¸å…³æ–‡ä»¶

- `.gitmodules` - å­æ¨¡å—é…ç½®
- `tools/maintenance/submodule_sync.sh` - åŒæ­¥ç®¡ç†è„šæœ¬
- `submodule-versions.json` - ç‰ˆæœ¬è®°å½•é…ç½®
- `submodule-lock.json` - ç‰ˆæœ¬é”å®šæ–‡ä»¶ï¼ˆç”Ÿæˆï¼‰

## ğŸ†˜ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜:

1. **å­æ¨¡å—çŠ¶æ€ä¸ä¸€è‡´**:
   ```bash
   git submodule update --remote --merge
   ```

2. **åˆ†æ”¯åˆ‡æ¢å¤±è´¥**:
   ```bash
   cd submodule_path
   git fetch origin
   git checkout stable
   ```

3. **æ¢å¤åˆ°mainåˆ†æ”¯è¿½è¸ª**:
   ```bash
   # ç¼–è¾‘ .gitmodulesï¼Œå°†branchæ”¹å›main
   git submodule sync
   git submodule update --remote
   ```