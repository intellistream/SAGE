# SAGE è´¡çŒ®æŒ‡å—

## ğŸ“‹ ç›®å½•
- [æ–°äººä»£ç æäº¤æµç¨‹](#æ–°äººä»£ç æäº¤æµç¨‹)
- [åˆ†æ”¯ç®¡ç†è§„èŒƒ](#åˆ†æ”¯ç®¡ç†è§„èŒƒ)
- [æäº¤ä¿¡æ¯è§„èŒƒ](#æäº¤ä¿¡æ¯è§„èŒƒ)
- [ä»£ç è´¨é‡è¦æ±‚](#ä»£ç è´¨é‡è¦æ±‚)
- [æµ‹è¯•è¦æ±‚](#æµ‹è¯•è¦æ±‚)
- [å¸¸è§é—®é¢˜è§£å†³](#å¸¸è§é—®é¢˜è§£å†³)

## ğŸš€ æ–°äººä»£ç æäº¤æµç¨‹

### ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡å·¥ä½œç¯å¢ƒ

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/intellistream/SAGE.git
cd SAGE

# 2. åˆ‡æ¢åˆ°ä¸»å¼€å‘åˆ†æ”¯
git checkout main-dev
git pull origin main-dev

# 3. å®‰è£…å¼€å‘ç¯å¢ƒ
./quickstart.sh --dev
```

### ç¬¬äºŒæ­¥ï¼šåˆ›å»ºåŠŸèƒ½åˆ†æ”¯

```bash
# æ ¹æ®åŠŸèƒ½ç±»å‹åˆ›å»ºåˆ†æ”¯ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½åè§„èŒƒï¼š
# - fix/xxx: ä¿®å¤é—®é¢˜
# - feat/xxx: æ–°åŠŸèƒ½
# - refactor/xxx: é‡æ„
# - docs/xxx: æ–‡æ¡£æ›´æ–°
# - test/xxx: æµ‹è¯•ç›¸å…³

# ç¤ºä¾‹ï¼šä¿®å¤CIç¼“å­˜é—®é¢˜
git checkout -b fix/ci-cache-permissions

# ç¤ºä¾‹ï¼šæ·»åŠ æ–°åŠŸèƒ½
git checkout -b feat/vllm-integration

# ç¤ºä¾‹ï¼šä¿®å¤æµ‹è¯•é—®é¢˜
git checkout -b fix/test-suite-improvements
```

### ç¬¬ä¸‰æ­¥ï¼šè¿›è¡Œå¼€å‘

```bash
# 1. ç¼–è¾‘ä»£ç æ–‡ä»¶
# ä½¿ç”¨ä½ å–œæ¬¢çš„ç¼–è¾‘å™¨ä¿®æ”¹ä»£ç 

# 2. å®æ—¶æ£€æŸ¥ä¿®æ”¹çŠ¶æ€
git status

# 3. æŸ¥çœ‹å…·ä½“ä¿®æ”¹å†…å®¹
git diff
```

### ç¬¬å››æ­¥ï¼šæµ‹è¯•éªŒè¯

```bash
# 1. è¿è¡Œç›¸å…³æµ‹è¯•
# å¯¹äºquickstartä¿®å¤
./quickstart.sh --minimal

# å¯¹äºæµ‹è¯•è„šæœ¬ä¿®å¤
bash tools/tests/test_issues_manager.sh --quick
bash tools/tests/optimized_test_runner.sh

# 2. æ£€æŸ¥ä»£ç è´¨é‡
# å¦‚æœä¿®æ”¹äº†Pythonä»£ç 
python -m py_compile modified_file.py

# å¦‚æœä¿®æ”¹äº†Shellè„šæœ¬
bash -n modified_script.sh
```

### ç¬¬äº”æ­¥ï¼šæäº¤ä»£ç 

```bash
# 1. æ·»åŠ ä¿®æ”¹çš„æ–‡ä»¶åˆ°æš‚å­˜åŒº
git add æ–‡ä»¶å1 æ–‡ä»¶å2
# æˆ–è€…æ·»åŠ æ‰€æœ‰ä¿®æ”¹
git add .

# 2. æäº¤ä»£ç ï¼ˆä½¿ç”¨è§„èŒƒçš„æäº¤ä¿¡æ¯ï¼‰
git commit -m "fix(ci): ä¿®å¤GitHub Actionsç¼“å­˜æƒé™é—®é¢˜

ğŸ”§ ä¸»è¦ä¿®å¤:
- ä¿®å¤'/var/cache/apt'æƒé™æ‹’ç»é”™è¯¯
- å°†ç¼“å­˜è·¯å¾„æ”¹ä¸ºç”¨æˆ·å¯å†™ç›®å½•
- ä¼˜åŒ–ç³»ç»Ÿä¾èµ–å®‰è£…æµç¨‹

ğŸ’¡ æŠ€æœ¯ç»†èŠ‚:
- ç§»é™¤å¯¹/var/cache/aptçš„ç¼“å­˜ä¾èµ–(éœ€è¦rootæƒé™)
- ä½¿ç”¨~/.cache/pipå’Œ/tmp/apt-cacheä½œä¸ºç¼“å­˜è·¯å¾„
- ç®€åŒ–aptæ›´æ–°é€»è¾‘ï¼Œä½¿ç”¨-qqå‡å°‘è¾“å‡º

ğŸ¯ è§£å†³çš„é—®é¢˜:
- CI post job cleanupå¤±è´¥
- ç¼“å­˜ä¿å­˜æƒé™æ‹’ç»é”™è¯¯

ğŸ“ ä¿®æ”¹æ–‡ä»¶:
- .github/workflows/dev-ci.yml"
```

### ç¬¬å…­æ­¥ï¼šæ¨é€åˆ†æ”¯

```bash
# æ¨é€æ–°åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“
git push -u origin åˆ†æ”¯å

# ç¤ºä¾‹
git push -u origin fix/ci-cache-permissions
```

### ç¬¬ä¸ƒæ­¥ï¼šåˆ›å»ºPull Request

1. è®¿é—®GitHubæä¾›çš„PRé“¾æ¥ï¼ˆæ¨é€åä¼šæ˜¾ç¤ºï¼‰
2. å¡«å†™PRæè¿°ï¼ŒåŒ…æ‹¬ï¼š
   - é—®é¢˜æè¿°
   - è§£å†³æ–¹æ¡ˆ
   - æµ‹è¯•ç»“æœ
   - å½±å“èŒƒå›´

## ğŸŒ² åˆ†æ”¯ç®¡ç†è§„èŒƒ

### ä¸»è¦åˆ†æ”¯
- `main-dev`: ä¸»å¼€å‘åˆ†æ”¯ï¼Œæ‰€æœ‰åŠŸèƒ½åˆ†æ”¯ä»è¿™é‡Œåˆ†å‡º
- `main`: ç¨³å®šå‘å¸ƒåˆ†æ”¯
- `feature/xxx`: å¤§å‹åŠŸèƒ½å¼€å‘åˆ†æ”¯

### åŠŸèƒ½åˆ†æ”¯å‘½åè§„èŒƒ
```
fix/é—®é¢˜æè¿°          # ä¿®å¤é—®é¢˜
feat/åŠŸèƒ½åç§°         # æ–°åŠŸèƒ½
refactor/é‡æ„å†…å®¹     # ä»£ç é‡æ„
docs/æ–‡æ¡£å†…å®¹         # æ–‡æ¡£æ›´æ–°
test/æµ‹è¯•å†…å®¹         # æµ‹è¯•ç›¸å…³
style/æ ·å¼è°ƒæ•´        # ä»£ç æ ¼å¼åŒ–
perf/æ€§èƒ½ä¼˜åŒ–         # æ€§èƒ½ä¼˜åŒ–
```

### ç¤ºä¾‹åˆ†æ”¯å
```
fix/ci-cache-permissions
fix/test-suite-improvements
fix/quickstart-ci-issues
feat/vllm-quickstart-integration
feat/new-memory-manager
refactor/jobmanager-architecture
docs/contributing-guide
test/unit-test-improvements
```

## ğŸ’¬ æäº¤ä¿¡æ¯è§„èŒƒ

### åŸºæœ¬æ ¼å¼
```
<ç±»å‹>(èŒƒå›´): ç®€çŸ­æè¿°

è¯¦ç»†æè¿°ï¼ˆå¯é€‰ï¼‰
- å…·ä½“ä¿®æ”¹å†…å®¹
- æŠ€æœ¯ç»†èŠ‚
- è§£å†³çš„é—®é¢˜

ä¿®æ”¹æ–‡ä»¶:
- æ–‡ä»¶1
- æ–‡ä»¶2
```

### ç±»å‹è¯´æ˜
- `fix`: ä¿®å¤é—®é¢˜
- `feat`: æ–°åŠŸèƒ½
- `refactor`: é‡æ„
- `docs`: æ–‡æ¡£
- `test`: æµ‹è¯•
- `style`: æ ¼å¼åŒ–
- `perf`: æ€§èƒ½ä¼˜åŒ–
- `ci`: CI/CDç›¸å…³

### èŒƒå›´è¯´æ˜
- `quickstart`: å®‰è£…è„šæœ¬
- `ci`: CI/CDç³»ç»Ÿ
- `tests`: æµ‹è¯•ç³»ç»Ÿ
- `core`: æ ¸å¿ƒåŠŸèƒ½
- `libs`: åº“æ–‡ä»¶
- `docs`: æ–‡æ¡£

### æäº¤ä¿¡æ¯ç¤ºä¾‹

#### ä¿®å¤é—®é¢˜
```
fix(ci): ä¿®å¤GitHub Actionsç¼“å­˜æƒé™é—®é¢˜

ğŸ”§ ä¸»è¦ä¿®å¤:
- ä¿®å¤'/var/cache/apt'æƒé™æ‹’ç»é”™è¯¯
- å°†ç¼“å­˜è·¯å¾„æ”¹ä¸ºç”¨æˆ·å¯å†™ç›®å½•

ğŸ“ ä¿®æ”¹æ–‡ä»¶:
- .github/workflows/dev-ci.yml
```

#### æ–°åŠŸèƒ½
```
feat(vllm): æ·»åŠ VLLMå¿«é€Ÿå¯åŠ¨æ”¯æŒ

âœ¨ æ–°åŠŸèƒ½:
- é›†æˆVLLMåˆ°quickstartè„šæœ¬
- æ·»åŠ è‡ªåŠ¨ç¯å¢ƒæ£€æµ‹
- æ”¯æŒGPUåŠ é€Ÿé…ç½®

ğŸ“ ä¿®æ”¹æ–‡ä»¶:
- quickstart.sh
- tools/install/vllm_installer.sh
```

#### æµ‹è¯•ä¿®å¤
```
fix(tests): ä¿®å¤æµ‹è¯•å¥—ä»¶ä¸­çš„å¡ä½å’Œè¶…æ—¶é—®é¢˜

ğŸ”§ ä¸»è¦ä¿®å¤:
- ä¿®å¤test_issues_manager.shä¸­çš„'æœªçŸ¥æµ‹è¯•æ¨¡å¼'é”™è¯¯
- è§£å†³æµ‹è¯•è„šæœ¬å¡ä½é—®é¢˜ï¼Œæ·»åŠ è¶…æ—¶å¤„ç†
- ä¼˜åŒ–sage-kernelåŒ…çš„pytestè¶…æ—¶é…ç½®

ğŸ“ ä¿®æ”¹æ–‡ä»¶:
- tools/tests/test_issues_manager.sh
- tools/tests/optimized_test_runner.sh
```

## ğŸ§ª æµ‹è¯•è¦æ±‚

### æäº¤å‰å¿…é¡»æµ‹è¯•

1. **è¯­æ³•æ£€æŸ¥**
   ```bash
   # Shellè„šæœ¬
   bash -n script.sh
   
   # Pythonè„šæœ¬
   python -m py_compile script.py
   ```

2. **åŠŸèƒ½æµ‹è¯•**
   ```bash
   # å®‰è£…è„šæœ¬æµ‹è¯•
   ./quickstart.sh --minimal
   
   # å•å…ƒæµ‹è¯•
   bash tools/tests/optimized_test_runner.sh
   
   # Issues manageræµ‹è¯•
   bash tools/tests/test_issues_manager.sh --quick
   ```

3. **é›†æˆæµ‹è¯•**
   ```bash
   # å®Œæ•´å®‰è£…æµ‹è¯•
   ./quickstart.sh
   
   # éªŒè¯å®‰è£…
   python -c "import sage; print(sage.__version__)"
   ```

## ğŸ”§ ä»£ç è´¨é‡è¦æ±‚

### Shellè„šæœ¬
- ä½¿ç”¨`set -e`è¿›è¡Œé”™è¯¯æ£€æŸ¥
- æ·»åŠ å¿…è¦çš„æ³¨é‡Š
- ä½¿ç”¨å‡½æ•°å°è£…é€»è¾‘
- å¤„ç†è¾¹ç•Œæƒ…å†µå’Œé”™è¯¯

### Pythonä»£ç 
- éµå¾ªPEP 8è§„èŒƒ
- æ·»åŠ ç±»å‹æ³¨è§£
- ç¼–å†™å•å…ƒæµ‹è¯•
- æ·»åŠ é€‚å½“çš„æ–‡æ¡£å­—ç¬¦ä¸²

### é€šç”¨è¦æ±‚
- ä»£ç å¯è¯»æ€§å¼º
- æ·»åŠ å¿…è¦æ³¨é‡Š
- å¤„ç†å¼‚å¸¸æƒ…å†µ
- é¿å…ç¡¬ç¼–ç 

## ğŸ†˜ å¸¸è§é—®é¢˜è§£å†³

### 1. åˆ†æ”¯è½åäºä¸»åˆ†æ”¯
```bash
git checkout main-dev
git pull origin main-dev
git checkout your-branch
git rebase main-dev
```

### 2. æäº¤ä¿¡æ¯å†™é”™äº†
```bash
# ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤ä¿¡æ¯
git commit --amend -m "æ–°çš„æäº¤ä¿¡æ¯"
```

### 3. æƒ³è¦æ’¤é”€æŸäº›ä¿®æ”¹
```bash
# æ’¤é”€å·¥ä½œåŒºä¿®æ”¹
git checkout -- æ–‡ä»¶å

# æ’¤é”€æš‚å­˜åŒºä¿®æ”¹
git reset HEAD æ–‡ä»¶å
```

### 4. æµ‹è¯•å¤±è´¥æ€ä¹ˆåŠ
```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
bash -x test_script.sh

# æ£€æŸ¥æƒé™
ls -la æ–‡ä»¶å

# æŸ¥çœ‹æ—¥å¿—
cat logs/install.log
```

### 5. CIæ„å»ºå¤±è´¥
- æŸ¥çœ‹GitHub Actionsæ—¥å¿—
- æœ¬åœ°å¤ç°CIç¯å¢ƒæµ‹è¯•
- æ£€æŸ¥æ–‡ä»¶æƒé™é—®é¢˜
- éªŒè¯ä¾èµ–æ˜¯å¦æ­£ç¡®å®‰è£…

## ğŸ“š å‚è€ƒèµ„æº

- [Gitå®˜æ–¹æ–‡æ¡£](https://git-scm.com/doc)
- [GitHub Flow](https://guides.github.com/introduction/flow/)
- [Conventional Commits](https://www.conventionalcommits.org/)
- [SAGEå¼€å‘æ–‡æ¡£](./README.md)

## ğŸ¤ è·å¾—å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æŸ¥çœ‹è¿™ä¸ªè´¡çŒ®æŒ‡å—
2. æœç´¢å·²æœ‰çš„Issues
3. åˆ›å»ºæ–°çš„Issueæè¿°é—®é¢˜
4. è”ç³»é¡¹ç›®ç»´æŠ¤è€…

---

**è®°ä½ï¼šå¥½çš„ä»£ç æäº¤ä¸ä»…æ˜¯åŠŸèƒ½æ­£ç¡®ï¼Œæ›´è¦è®©å…¶ä»–å¼€å‘è€…å®¹æ˜“ç†è§£å’Œç»´æŠ¤ï¼** ğŸš€
