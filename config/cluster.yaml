# SAGE Cluster Configuration
# 配置文件路径: <project_root>/config/cluster.yaml

# Head 节点配置
head:
  host: "sage-node-1"           # Head 节点 IP/主机名
  head_port: 26379               # Ray GCS 端口
  dashboard_port: 28265          # Ray Dashboard 端口
  dashboard_host: "0.0.0.0"      # Dashboard 监听地址
  temp_dir: "/var/tmp/ray"
  log_dir: "/var/tmp/sage_head_logs"
  conda_env: "base"              # Conda 环境名称 (base 或 sage)
  python_path: ""                # 留空自动检测
  ray_command: ""                # 留空自动检测
  num_cpus: 4                    # 容器实际分配的 CPU 核心数 (覆盖自动检测)
  num_gpus: 0                    # GPU 数量

# Worker 节点配置
worker:
  bind_host: "localhost"
  temp_dir: "/tmp/ray_worker"
  log_dir: "/tmp/sage_worker_logs"
  num_cpus: 4                    # 每个 Worker 容器分配的 CPU 核心数
  num_gpus: 0                    # 每个 Worker 容器的 GPU 数量

# SSH 配置
ssh:
  user: "sage"                   # SSH 用户名
  key_path: "~/.ssh/id_rsa"      # SSH 私钥路径
  connect_timeout: 10            # 连接超时（秒）
  workers:
    - host: "sage-node-2"
      port: 22
    - host: "sage-node-3"
      port: 22
    - host: "sage-node-4"
      port: 22

# 远程节点配置
remote:
  sage_home: "/home/sage"
  python_path: ""                # 留空自动检测
  ray_command: ""                # 留空自动检测
  conda_env: "base"              # Worker 节点的 conda 环境名 (base 或 sage)

# Daemon 配置
daemon:
  host: "sage-node-1"
  port: 19001

# 输出配置
output:
  format: "table"
  colors: true

# 监控配置
monitor:
  refresh_interval: 5

# JobManager 配置
jobmanager:
  host: "0.0.0.0"  # 绑定地址，0.0.0.0 允许其他节点访问
  port: 19001
  timeout: 30
  retry_attempts: 3
