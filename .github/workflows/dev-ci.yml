name: "Development CI"

on:
  push:
    branches: [main-dev]
    paths-ignore:
      - '**/*.md'
      - 'docs/**'
      - 'README*'
  pull_request:
    branches: [main-dev]
    types: [opened, synchronize, reopened, ready_for_review]
    paths-ignore:
      - '**/*.md'
      - 'docs/**'
      - 'README*'
  workflow_dispatch:

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

env:
  CI: true
  SAGE_VERBOSE_BUILD: true
  HF_TOKEN: ${{ secrets.HF_TOKEN }}
  SILICONCLOUD_API_KEY: ${{ secrets.SILICONCLOUD_API_KEY }}
  OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
  JINA_API_KEY: ${{ secrets.JINA_API_KEY }}
  ALIBABA_API_KEY: ${{ secrets.ALIBABA_API_KEY }}
  VLLM_API_KEY: ${{ secrets.VLLM_API_KEY }}
  GIT_TOKEN: ${{ secrets.GIT_TOKEN }}
  HF_ENDPOINT: https://hf-mirror.com
  # ç§»é™¤æ‰‹åŠ¨CACHE_VERSIONï¼Œè®©ç¼“å­˜å®Œå…¨åŸºäºä»£ç å†…å®¹è‡ªåŠ¨å¤±æ•ˆ

jobs:
  quick-check:
    name: SAGE Self-Check
    runs-on: ubuntu-latest
    timeout-minutes: 30

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Set up Python 3.11
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
          cache: 'pip'

      - name: Create .env File from Secrets
        run: |
          echo "ğŸ” ä» GitHub Secrets åˆ›å»º .env æ–‡ä»¶..."
          cat > .env << EOF
          # CI Environment Configuration (Auto-generated from GitHub Secrets)
          # This file is created during CI/CD and should not be committed to git
          
          # ==================================================
          # LLM Service API Keys
          # ==================================================
          
          OPENAI_API_KEY=${{ secrets.OPENAI_API_KEY }}
          OPENAI_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
          OPENAI_MODEL_NAME=qwen-turbo-2025-02-11
          
          SILICONCLOUD_API_KEY=${{ secrets.SILICONCLOUD_API_KEY }}
          JINA_API_KEY=${{ secrets.JINA_API_KEY }}
          ALIBABA_API_KEY=${{ secrets.ALIBABA_API_KEY }}
          
          # vLLM configuration for local/self-hosted services
          VLLM_API_KEY=${{ secrets.VLLM_API_KEY }}
          VLLM_BASE_URL=http://localhost:8000/v1
          VLLM_MODEL_NAME=meta-llama/Llama-2-13b-chat-hf
          
          # ==================================================
          # GitHub Token for Repository Access
          # ==================================================
          
          GIT_TOKEN=${{ secrets.GIT_TOKEN }}
          
          
          
          # ==================================================
          # Hugging Face Configuration
          # ==================================================
          
          HF_TOKEN=${{ secrets.HF_TOKEN }}
          HF_ENDPOINT=https://hf-mirror.com
          
          # ==================================================
          # CI/CD Settings
          # ==================================================
          
          SAGE_DEBUG=false
          SAGE_SKIP_CPP_EXTENSIONS=false
          SAGE_LOG_LEVEL=INFO
          SAGE_TEST_MODE=true
          SAGE_EXAMPLES_MODE=test
          EOF
          
          echo "âœ… .env æ–‡ä»¶åˆ›å»ºå®Œæˆ"
          echo "ğŸ“‹ éªŒè¯ .env æ–‡ä»¶å†…å®¹ï¼ˆéšè—æ•æ„Ÿä¿¡æ¯ï¼‰:"
          cat .env | grep -E "^[A-Z_]+=.+" | sed 's/=.*/=***/' || echo "âš ï¸ .env æ–‡ä»¶ä¸ºç©ºæˆ–æ ¼å¼ä¸æ­£ç¡®"

      - name: Initialize Submodules
        run: |
          echo "ğŸ” åˆå§‹åŒ–å­æ¨¡å—ï¼ˆC++æ‰©å±•ä¾èµ–ï¼‰..."
          git submodule update --init --recursive
          echo "âœ… å­æ¨¡å—åˆå§‹åŒ–å®Œæˆ"

      - name: Install SAGE
        run: |
          echo "ï¿½ å®‰è£…SAGEï¼ˆä½¿ç”¨quickstart.sh --devï¼‰..."
          chmod +x ./quickstart.sh
          ./quickstart.sh --dev --pip --yes
          echo "âœ… SAGEå®‰è£…å®Œæˆ"

      - name: Run Basic Tests
        run: |
          echo "ğŸ§ª è¿è¡ŒåŸºç¡€æµ‹è¯•..."
          python -c "import sage; import sage.common; print('âœ… åŸºç¡€å¯¼å…¥æµ‹è¯•é€šè¿‡')"
          
          if command -v sage >/dev/null 2>&1; then
            sage --help > /dev/null && echo "âœ… CLIæµ‹è¯•é€šè¿‡"
          fi

      - name: Run SAGE Unit Tests
        run: |
          echo "ğŸ§ª è¿è¡ŒSAGEå•å…ƒæµ‹è¯•..."
          # å®‰è£…æµ‹è¯•ä¾èµ–ï¼ˆåŒ…æ‹¬ pytest-xdist ç”¨äºå¹¶è¡Œæµ‹è¯•ï¼‰
          pip install pytest pytest-cov pytest-xdist
          
          # è¿è¡Œå„ä¸ªåŒ…çš„æµ‹è¯•ï¼ˆæŒ‰ä¾èµ–é¡ºåºï¼Œè·³è¿‡æ²¡æœ‰æµ‹è¯•çš„åŒ…ï¼‰
          # ä½¿ç”¨ -n auto å¯ç”¨å¹¶è¡Œæµ‹è¯•ï¼Œä½¿ç”¨ -m "not slow" è·³è¿‡æ…¢é€Ÿæµ‹è¯•
          # æ’é™¤ pypi æµ‹è¯•ï¼ˆè¿™äº›æ˜¯æ‰‹åŠ¨éªŒè¯ç”¨çš„ï¼‰
          test_packages=("sage-common" "sage-kernel" "sage-tools" "sage-libs" "sage-middleware" "sage-apps" "sage-benchmark" "sage-studio")
          failed_tests=0
          failed_packages=()

          for package in "${test_packages[@]}"; do
            if [ -d "packages/$package/tests" ]; then
              echo "ğŸ§ª æµ‹è¯• $package..."
              if python -m pytest "packages/$package/tests/" \
                  -v -n auto -m "not slow" \
                  --ignore="packages/$package/tests/pypi" \
                  --tb=short --maxfail=3; then
                echo "âœ… $package æµ‹è¯•é€šè¿‡"
              else
                echo "âŒ $package æµ‹è¯•å¤±è´¥"
                failed_tests=$((failed_tests + 1))
                failed_packages+=("$package")
              fi
            else
              echo "âš ï¸ $package æ²¡æœ‰testsç›®å½•ï¼Œè·³è¿‡"
            fi
          done

          # æŠ¥å‘Šæµ‹è¯•ç»“æœå¹¶åœ¨æœ‰å¤±è´¥æ—¶ç»ˆæ­¢ï¼ˆè¿”å›éé›¶é€€å‡ºç ï¼‰
          if [ $failed_tests -eq 0 ]; then
            echo "ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼"
          else
            echo "âŒ $failed_tests ä¸ªåŒ…çš„æµ‹è¯•å¤±è´¥ï¼š ${failed_packages[*]}"
            echo "ä¸ºé˜²æ­¢é”™è¯¯è¢«å¿½ç•¥ï¼ŒCI å°†ä»¥å¤±è´¥çŠ¶æ€é€€å‡ºã€‚"
            exit 1
          fi
        timeout-minutes: 20

  examples-test:
    name: Examples Test
    runs-on: ubuntu-latest
    timeout-minutes: 45

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Set up Python 3.11
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
          cache: 'pip'

      - name: Create .env File from Secrets
        run: |
          echo "ğŸ” ä» GitHub Secrets åˆ›å»º .env æ–‡ä»¶..."
          cat > .env << EOF
          # CI Environment Configuration (Auto-generated from GitHub Secrets)
          # This file is created during CI/CD and should not be committed to git
          
          # ==================================================
          # LLM Service API Keys
          # ==================================================
          
          OPENAI_API_KEY=${{ secrets.OPENAI_API_KEY }}
          OPENAI_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
          OPENAI_MODEL_NAME=qwen-turbo-2025-02-11
          
          SILICONCLOUD_API_KEY=${{ secrets.SILICONCLOUD_API_KEY }}
          JINA_API_KEY=${{ secrets.JINA_API_KEY }}
          ALIBABA_API_KEY=${{ secrets.ALIBABA_API_KEY }}
          
          # vLLM configuration for local/self-hosted services
          VLLM_API_KEY=${{ secrets.VLLM_API_KEY }}
          VLLM_BASE_URL=http://localhost:8000/v1
          VLLM_MODEL_NAME=meta-llama/Llama-2-13b-chat-hf
          
          # ==================================================
          # GitHub Token for Repository Access
          # ==================================================
          
          GIT_TOKEN=${{ secrets.GIT_TOKEN }}
          
          
          
          # ==================================================
          # Hugging Face Configuration
          # ==================================================
          
          HF_TOKEN=${{ secrets.HF_TOKEN }}
          HF_ENDPOINT=https://hf-mirror.com
          
          # ==================================================
          # CI/CD Settings
          # ==================================================
          
          SAGE_DEBUG=false
          SAGE_SKIP_CPP_EXTENSIONS=false
          SAGE_LOG_LEVEL=INFO
          SAGE_TEST_MODE=true
          SAGE_EXAMPLES_MODE=test
          EOF
          
          echo "âœ… .env æ–‡ä»¶åˆ›å»ºå®Œæˆ"
          echo "ğŸ“‹ éªŒè¯ .env æ–‡ä»¶å†…å®¹ï¼ˆéšè—æ•æ„Ÿä¿¡æ¯ï¼‰:"
          cat .env | grep -E "^[A-Z_]+=.+" | sed 's/=.*/=***/' || echo "âš ï¸ .env æ–‡ä»¶ä¸ºç©ºæˆ–æ ¼å¼ä¸æ­£ç¡®"

      - name: Initialize Submodules
        run: |
          echo "ğŸ” åˆå§‹åŒ–å­æ¨¡å—ï¼ˆC++æ‰©å±•ä¾èµ–ï¼‰..."
          git submodule update --init --recursive
          echo "âœ… å­æ¨¡å—åˆå§‹åŒ–å®Œæˆ"

      - name: Install SAGE
        run: |
          echo "ï¿½ å®‰è£…SAGEï¼ˆä½¿ç”¨quickstart.sh --devï¼‰..."
          chmod +x ./quickstart.sh
          ./quickstart.sh --dev --pip --yes
          echo "âœ… SAGEå®‰è£…å®Œæˆ"

      - name: Run Examples Tests
        run: |
          echo "ğŸŒŸ è¿è¡ŒExamplesæµ‹è¯•..."
          chmod +x ./tools/tests/run_examples_tests.sh
          ./tools/tests/run_examples_tests.sh --timeout 300
  
  deployment-ready:
    name: Deployment Readiness Check
    # GitHub å…è´¹ Runner é…ç½®ï¼ˆç£ç›˜ç©ºé—´çº¦ 14GBï¼Œå¯èƒ½ä¸è¶³ï¼‰
    runs-on: ubuntu-latest
    
    # å¦‚æœé‡åˆ°ç£ç›˜ç©ºé—´ä¸è¶³ï¼Œå¯ä»¥åˆ‡æ¢åˆ° self-hosted runner:
    # runs-on: self-hosted
    
    needs: [quick-check, examples-test]
    if: |
      (github.event_name == 'push' && (github.ref == 'refs/heads/main' || github.ref == 'refs/heads/main-dev')) ||
      (github.event_name == 'pull_request' && github.base_ref == 'main-dev')
    timeout-minutes: 30
    
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          fetch-depth: 1
          clean: true

      - name: Set up Python 3.11
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
          cache: 'pip'

      - name: Free up disk space (Aggressive)
        run: |
          echo "ğŸ§¹ æ¿€è¿›æ¸…ç†ç£ç›˜ç©ºé—´ï¼ˆDeployment Readiness éœ€è¦åœ¨æ–°è™šæ‹Ÿç¯å¢ƒå®‰è£…æ‰€æœ‰ä¾èµ–ï¼‰..."
          echo "ğŸ“Š æ¸…ç†å‰ç£ç›˜ä½¿ç”¨æƒ…å†µï¼š"
          df -h
          
          # åˆ é™¤ä¸éœ€è¦çš„è½¯ä»¶å’Œå·¥å…·é“¾
          echo "ğŸ—‘ï¸ åˆ é™¤ .NETã€Androidã€GHC ç­‰å¤§å‹å·¥å…·é“¾..."
          sudo rm -rf /usr/share/dotnet
          sudo rm -rf /usr/local/lib/android
          sudo rm -rf /opt/ghc
          sudo rm -rf /opt/hostedtoolcache/CodeQL
          sudo rm -rf /usr/local/share/boost
          sudo rm -rf "$AGENT_TOOLSDIRECTORY"
          
          # åˆ é™¤æ›´å¤šä¸éœ€è¦çš„åŒ…
          echo "ğŸ—‘ï¸ åˆ é™¤ä¸éœ€è¦çš„ç³»ç»ŸåŒ…..."
          sudo rm -rf /usr/share/swift
          sudo rm -rf /usr/local/.ghcup
          sudo rm -rf /usr/local/lib/node_modules
          
          # æ¸…ç† APT ç¼“å­˜
          echo "ğŸ—‘ï¸ æ¸…ç† APT ç¼“å­˜..."
          sudo apt-get clean
          sudo apt-get autoclean
          
          # æ¸…ç† Docker é•œåƒå’Œå®¹å™¨
          echo "ğŸ—‘ï¸ æ¸…ç† Docker..."
          docker system prune -af --volumes 2>/dev/null || true
          
          # æ¸…ç† pip ç¼“å­˜
          echo "ğŸ—‘ï¸ æ¸…ç† pip ç¼“å­˜..."
          pip cache purge || true
          
          echo "âœ… æ¸…ç†å®Œæˆï¼Œå½“å‰ç£ç›˜ä½¿ç”¨æƒ…å†µï¼š"
          df -h
          echo "ğŸ“Š æ ¹åˆ†åŒºå‰©ä½™ç©ºé—´ï¼š"
          df -h / | tail -1 | awk '{print "å¯ç”¨: " $4 " (" $5 " å·²ä½¿ç”¨)"}'

      - name: Create .env File from Secrets
        run: |
          echo "ğŸ” ä» GitHub Secrets åˆ›å»º .env æ–‡ä»¶..."
          cat > .env << EOF
          # CI Environment Configuration (Auto-generated from GitHub Secrets)
          # This file is created during CI/CD and should not be committed to git
          
          # ==================================================
          # LLM Service API Keys
          # ==================================================
          
          OPENAI_API_KEY=${{ secrets.OPENAI_API_KEY }}
          OPENAI_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
          OPENAI_MODEL_NAME=qwen-turbo-2025-02-11
          
          SILICONCLOUD_API_KEY=${{ secrets.SILICONCLOUD_API_KEY }}
          JINA_API_KEY=${{ secrets.JINA_API_KEY }}
          ALIBABA_API_KEY=${{ secrets.ALIBABA_API_KEY }}
          
          # vLLM configuration for local/self-hosted services
          VLLM_API_KEY=${{ secrets.VLLM_API_KEY }}
          VLLM_BASE_URL=http://localhost:8000/v1
          VLLM_MODEL_NAME=meta-llama/Llama-2-13b-chat-hf
          
          # ==================================================
          # GitHub Token for Repository Access
          # ==================================================
          
          GIT_TOKEN=${{ secrets.GIT_TOKEN }}
          
          
          
          # ==================================================
          # Hugging Face Configuration
          # ==================================================
          
          HF_TOKEN=${{ secrets.HF_TOKEN }}
          HF_ENDPOINT=https://hf-mirror.com
          
          # ==================================================
          # CI/CD Settings
          # ==================================================
          
          SAGE_DEBUG=false
          SAGE_SKIP_CPP_EXTENSIONS=false
          SAGE_LOG_LEVEL=INFO
          SAGE_TEST_MODE=true
          SAGE_EXAMPLES_MODE=test
          EOF
          
          echo "âœ… .env æ–‡ä»¶åˆ›å»ºå®Œæˆ"
          echo "ğŸ“‹ éªŒè¯ .env æ–‡ä»¶å†…å®¹ï¼ˆéšè—æ•æ„Ÿä¿¡æ¯ï¼‰:"
          cat .env | grep -E "^[A-Z_]+=.+" | sed 's/=.*/=***/' || echo "âš ï¸ .env æ–‡ä»¶ä¸ºç©ºæˆ–æ ¼å¼ä¸æ­£ç¡®"

      - name: Initialize Submodules
        run: |
          echo "ğŸ” åˆå§‹åŒ–å­æ¨¡å—ï¼ˆC++æ‰©å±•ä¾èµ–ï¼‰..."
          git submodule update --init --recursive
          echo "âœ… å­æ¨¡å—åˆå§‹åŒ–å®Œæˆ"

      - name: Install SAGE
        run: |
          echo "ï¿½ å®‰è£…SAGEï¼ˆä½¿ç”¨quickstart.sh --devï¼‰..."
          chmod +x ./quickstart.sh
          ./quickstart.sh --dev --pip --yes
          echo "âœ… SAGEå®‰è£…å®Œæˆ"

      - name: Validate PyPI Release Readiness
        run: |
          echo "ğŸ” éªŒè¯SAGEä»£ç çš„PyPIå‘å¸ƒå‡†å¤‡çŠ¶æ€..."
          if sage dev pypi validate; then
            echo "âœ… PyPIå‘å¸ƒå‡†å¤‡éªŒè¯å®Œæˆ"
          else
            echo "âŒ PyPIå‘å¸ƒå‡†å¤‡éªŒè¯å¤±è´¥"
            exit 1
          fi

      - name: Check Package Build Status
        run: |
          echo "ğŸ—ï¸ æ£€æŸ¥SAGEåŒ…çš„æ„å»ºçŠ¶æ€..."
          if sage dev pypi check; then
            echo "âœ… åŒ…æ„å»ºçŠ¶æ€æ£€æŸ¥å®Œæˆ"
          else
            echo "âŒ åŒ…æ„å»ºçŠ¶æ€æ£€æŸ¥å¤±è´¥"
            exit 1
          fi

      - name: Build SAGE Packages
        run: |
          echo "ğŸ“¦ æ„å»ºSAGE wheelåŒ…..."
          echo "â„¹ï¸  å·²é€šè¿‡ 'sage dev pypi validate' æ­¥éª¤æ„å»ºæ‰€æœ‰åŒ…"
          
          # æ˜¾ç¤ºæ‰€æœ‰æ„å»ºçš„æ–‡ä»¶
          echo "ğŸ“‹ æ‰€æœ‰æ„å»ºçš„åŒ…æ–‡ä»¶:"
          find packages/*/dist/ -name "*.whl" | sort
          
          # éªŒè¯æ‰€æœ‰å¿…éœ€çš„åŒ…éƒ½å·²æ„å»º
          echo ""
          echo "ğŸ” éªŒè¯å¿…éœ€çš„åŒ…:"
          for pkg in sage-common sage-kernel sage-middleware sage-libs sage-tools sage-apps sage-benchmark sage-studio sage; do
            if ls packages/${pkg}/dist/*.whl 1> /dev/null 2>&1; then
              echo "  âœ… ${pkg}: $(ls packages/${pkg}/dist/*.whl | xargs -n1 basename)"
            else
              echo "  âŒ ${pkg}: æœªæ‰¾åˆ°wheelæ–‡ä»¶"
              exit 1
            fi
          done
          echo "âœ… æ‰€æœ‰åŒ…æ„å»ºå®Œæˆ"

      - name: Test Package Installation
        run: |
          echo "ğŸ§ª æµ‹è¯•åŒ…å®‰è£…..."
          
          # åˆ›å»ºä¸´æ—¶ç¯å¢ƒæµ‹è¯•å®‰è£…
          python -m venv /tmp/test_env
          source /tmp/test_env/bin/activate
          
          # æŸ¥æ‰¾æ„å»ºçš„wheelæ–‡ä»¶
          echo "ğŸ” æŸ¥æ‰¾æ„å»ºçš„wheelæ–‡ä»¶..."
          find . -name "*.whl" -type f | head -10
          
          # åˆ›å»ºæœ¬åœ°åŒ…ç´¢å¼•ç›®å½•
          echo "ğŸ“¦ åˆ›å»ºæœ¬åœ°åŒ…ç´¢å¼•..."
          mkdir -p /tmp/local_packages
          find packages/*/dist -name "*.whl" -exec cp {} /tmp/local_packages/ \;
          ls -lh /tmp/local_packages/
          
          # ä½¿ç”¨æœ¬åœ°åŒ…ç´¢å¼•å®‰è£…æ ¸å¿ƒåŒ…è¿›è¡Œæµ‹è¯•
          echo "ğŸ“¦ æµ‹è¯•å®‰è£…æ ¸å¿ƒåŒ…ï¼ˆä½¿ç”¨æœ¬åœ°ä¾èµ–ï¼‰..."
          if ls packages/sage/dist/isage-*.whl 1> /dev/null 2>&1; then
            # ä½¿ç”¨--find-linksä»æœ¬åœ°ç›®å½•ä¼˜å…ˆæŸ¥æ‰¾SAGEåŒ…ï¼Œå…¶ä»–ä¾èµ–ä»PyPIä¸‹è½½
            pip install --find-links=/tmp/local_packages packages/sage/dist/isage-*.whl
            python -c "import sage; print('âœ… sageæ ¸å¿ƒåŒ…å®‰è£…æˆåŠŸ')"
          else
            echo "âš ï¸ æœªæ‰¾åˆ°æ ¸å¿ƒåŒ…wheelæ–‡ä»¶"
          fi
          
          # æµ‹è¯•å·¥å…·åŒ…å®‰è£…
          if ls packages/sage-tools/dist/isage_tools-*.whl 1> /dev/null 2>&1; then
            pip install --find-links=/tmp/local_packages packages/sage-tools/dist/isage_tools-*.whl
            python -c "import sage.tools; print('âœ… sage-toolsåŒ…å®‰è£…æˆåŠŸ')"
          else
            echo "âš ï¸ æœªæ‰¾åˆ°å·¥å…·åŒ…wheelæ–‡ä»¶"
          fi
          
          deactivate
          echo "âœ… åŒ…å®‰è£…æµ‹è¯•å®Œæˆ"

      - name: Deployment Status Summary
        run: |
          echo "ğŸš€ éƒ¨ç½²å°±ç»ªæ£€æŸ¥æ€»ç»“"
          echo "âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡"
          echo "âœ… PyPIå‘å¸ƒéªŒè¯é€šè¿‡"
          echo "âœ… åŒ…æ„å»ºæˆåŠŸ"
          echo "âœ… åŒ…å®‰è£…æµ‹è¯•é€šè¿‡"
          echo "âœ… ä¸»åˆ†æ”¯æ¨é€"
          echo "ğŸ‰ SAGEå·²å‡†å¤‡å¥½éƒ¨ç½²åˆ°PyPI"      

  summary:
    name: CI Summary
    runs-on: ubuntu-latest
    if: always()
    needs: [quick-check, examples-test, deployment-ready]

    steps:
      - name: Summary Report
        run: |
          echo "ğŸ å¼€å‘CIç®¡é“å®Œæˆ"
          echo "ğŸ“Š ä½œä¸šçŠ¶æ€:"
          echo "- Quick Check: ${{ needs.quick-check.result }}"
          echo "- Examples: ${{ needs.examples-test.result }}"
          echo "- Deployment Ready: ${{ needs.deployment-ready.result }}"
          
          if [[ "${{ needs.quick-check.result }}" == "success" ]]; then
            echo "âœ… æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸"
          else
            echo "âŒ æ ¸å¿ƒåŠŸèƒ½å­˜åœ¨é—®é¢˜"
          fi
          
          if [[ "${{ needs.deployment-ready.result }}" == "success" ]]; then
            echo "ğŸš€ éƒ¨ç½²å‡†å¤‡å®Œæˆ"
          elif [[ "${{ needs.deployment-ready.result }}" == "skipped" ]]; then
            echo "â­ï¸ éƒ¨ç½²æ£€æŸ¥å·²è·³è¿‡ï¼ˆéä¸»åˆ†æ”¯æ¨é€ï¼‰"
          else
            echo "âŒ éƒ¨ç½²å‡†å¤‡å¤±è´¥"
          fi