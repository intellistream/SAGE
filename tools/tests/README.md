# SAGE Examples æµ‹è¯•ç³»ç»Ÿ

è¿™ä¸ªæµ‹è¯•ç³»ç»Ÿä¸“é—¨ç”¨äºæµ‹è¯• `examples/` ç›®å½•ä¸‹çš„æ‰€æœ‰ç¤ºä¾‹ä»£ç ï¼Œç¡®ä¿ç¤ºä¾‹ä»£ç çš„è´¨é‡å’Œå¯ç”¨æ€§ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ” è‡ªåŠ¨å‘ç°ä¸åˆ†æ
- **æ™ºèƒ½æ‰«æ**: è‡ªåŠ¨å‘ç° `examples/` ç›®å½•ä¸‹çš„æ‰€æœ‰ Python æ–‡ä»¶
- **ä¾èµ–åˆ†æ**: åˆ†ææ¯ä¸ªç¤ºä¾‹çš„å¯¼å…¥ä¾èµ–å’Œå¤–éƒ¨åŒ…éœ€æ±‚
- **åˆ†ç±»è¯†åˆ«**: è‡ªåŠ¨è¯†åˆ«ç¤ºä¾‹çš„ç±»åˆ«ï¼ˆtutorialsã€ragã€memory ç­‰ï¼‰
- **è¿è¡Œæ—¶è¯„ä¼°**: ä¼°ç®—ç¤ºä¾‹çš„è¿è¡Œæ—¶é—´ï¼ˆå¿«é€Ÿã€ä¸­ç­‰ã€æ…¢é€Ÿï¼‰

### ğŸ§ª CLI é›†æˆæµ‹è¯•
- **é›†ä¸­å…¥å£**: `packages/sage-tools/tests/test_cli/runner.py` æ±‡æ€»æ‰€æœ‰å‘½ä»¤åˆ†ç»„çš„æµ‹è¯•ç”¨ä¾‹
- **çœŸå®è·¯å¾„**: é’ˆå¯¹ `sage` Typer CLI çš„é«˜é¢‘å‘½ä»¤æ‰§è¡Œå¸¦æœ‰éš”ç¦»ä¾èµ–çš„æ¨¡æ‹Ÿâ€œçœŸå‘½ä»¤â€æµç¨‹
- **ç»Ÿä¸€è¾…åŠ©**: `helpers.py` æä¾›é…ç½®ã€è¿›ç¨‹ç­‰è™šæ‹Ÿå¯¹è±¡ï¼Œç¡®ä¿æµ‹è¯•æ— å‰¯ä½œç”¨ä½†è¦†ç›–æ›´å¤šæ‰§è¡Œé€»è¾‘
- **ä¾¿æ·è¿è¡Œ**: å¯ç›´æ¥è¿è¡Œ `python packages/sage-tools/tests/test_cli/runner.py` æˆ–é€šè¿‡ `sage dev test` é›†æˆå…¥å£è§¦å‘ï¼ˆåç»­ä»»åŠ¡ï¼‰

### ğŸš€ çµæ´»çš„æµ‹è¯•æ‰§è¡Œ
- **å¤šç§è¿è¡Œæ¨¡å¼**: æ”¯æŒç‹¬ç«‹è„šæœ¬å’Œ pytest é›†æˆä¸¤ç§æ–¹å¼
- **åˆ†ç±»æµ‹è¯•**: å¯ä»¥æŒ‰ç±»åˆ«ï¼ˆå¦‚åªæµ‹è¯• tutorialsï¼‰è¿è¡Œæµ‹è¯•
- **å¿«é€Ÿæµ‹è¯•**: æ”¯æŒåªè¿è¡Œå¿«é€Ÿæµ‹è¯•ä»¥æé«˜CIæ•ˆç‡
- **æ™ºèƒ½è·³è¿‡**: è‡ªåŠ¨è·³è¿‡éœ€è¦ç”¨æˆ·è¾“å…¥ã€GUIæˆ–ç¼ºå¤±ä¾èµ–çš„ç¤ºä¾‹

### ğŸ“Š è¯¦ç»†çš„ç»“æœæŠ¥å‘Š
- **å®æ—¶è¿›åº¦**: æ˜¾ç¤ºæµ‹è¯•æ‰§è¡Œè¿›åº¦å’ŒçŠ¶æ€
- **ç»“æœç»Ÿè®¡**: æä¾›é€šè¿‡/å¤±è´¥/è·³è¿‡/è¶…æ—¶çš„è¯¦ç»†ç»Ÿè®¡
- **é”™è¯¯ä¿¡æ¯**: æ•è·å¹¶æ˜¾ç¤ºè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
- **JSONæŠ¥å‘Š**: æ”¯æŒå¯¼å‡ºç»“æ„åŒ–çš„æµ‹è¯•ç»“æœ

### ğŸ› ï¸ ç¯å¢ƒç®¡ç†
- **æµ‹è¯•ç¯å¢ƒ**: ä¸ºæ¯ç§ç±»å‹çš„ç¤ºä¾‹é…ç½®ä¸“é—¨çš„æµ‹è¯•ç¯å¢ƒ
- **æ¨¡æ‹Ÿæ•°æ®**: ä¸ºéœ€è¦æ•°æ®çš„ç¤ºä¾‹è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•æ•°æ®
- **é…ç½®ç®¡ç†**: è‡ªåŠ¨åˆ›å»ºæµ‹è¯•é…ç½®æ–‡ä»¶é¿å…çœŸå®æœåŠ¡ä¾èµ–

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install typer rich pytest pytest-timeout
```

### 2. åˆ†æç¤ºä¾‹ç»“æ„

```bash
# æŸ¥çœ‹æ‰€æœ‰ç¤ºä¾‹çš„åˆ†ææŠ¥å‘Š
./tools/tests/run_examples_tests.sh --analyze

# æˆ–ä½¿ç”¨ Python ç›´æ¥è¿è¡Œ
python3 tools/tests/test_examples.py analyze
```

### 3. è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰å¿«é€Ÿæµ‹è¯•ï¼ˆæ¨èç”¨äºCIï¼‰
./tools/tests/run_examples_tests.sh --quick

# åªæµ‹è¯• tutorials ç±»åˆ«
./tools/tests/run_examples_tests.sh --category tutorials

# ä½¿ç”¨ pytest è¿è¡Œï¼ˆæ¨èï¼‰
./tools/tests/run_examples_tests.sh --pytest --quick

# ä¿å­˜æµ‹è¯•ç»“æœ
./tools/tests/run_examples_tests.sh --quick --output results.json
```

## æµ‹è¯•ç­–ç•¥

### æŒ‰ç±»åˆ«çš„æµ‹è¯•ç­–ç•¥

#### Tutorials ç±»åˆ«
- **è¶…æ—¶**: 30ç§’
- **ä¾èµ–**: é€šå¸¸æ— å¤–éƒ¨ä¾èµ–
- **æœŸæœ›æˆåŠŸç‡**: 80%+
- **ç‰¹ç‚¹**: åŸºç¡€åŠŸèƒ½æ¼”ç¤ºï¼Œåº”è¯¥ç¨³å®šè¿è¡Œ

#### RAG ç±»åˆ«  
- **è¶…æ—¶**: 120ç§’
- **ä¾èµ–**: å¯èƒ½éœ€è¦ API keysã€å‘é‡æ•°æ®åº“
- **æœŸæœ›æˆåŠŸç‡**: 30%+ï¼ˆå› ä¾èµ–é—®é¢˜ï¼‰
- **ç‰¹ç‚¹**: ä¼šè‡ªåŠ¨è·³è¿‡ç¼ºå¤±API keyçš„ç¤ºä¾‹

#### Memory ç±»åˆ«
- **è¶…æ—¶**: 60ç§’
- **ä¾èµ–**: å†…å­˜æœåŠ¡ã€æ•°æ®æ–‡ä»¶
- **æœŸæœ›æˆåŠŸç‡**: 60%+
- **ç‰¹ç‚¹**: æµ‹è¯•å†…å­˜ç®¡ç†åŠŸèƒ½

#### Service ç±»åˆ«
- **è¶…æ—¶**: 90ç§’
- **ä¾èµ–**: ç½‘ç»œç«¯å£ã€é…ç½®æ–‡ä»¶
- **æœŸæœ›æˆåŠŸç‡**: å¯å˜
- **ç‰¹ç‚¹**: é•¿æœŸè¿è¡Œçš„æœåŠ¡ä¼šè¢«è·³è¿‡

### è‡ªåŠ¨è·³è¿‡æ¡ä»¶

ç¤ºä¾‹ä¼šåœ¨ä»¥ä¸‹æƒ…å†µè¢«è‡ªåŠ¨è·³è¿‡ï¼š
- åŒ…å« `# SKIP_TEST` æ ‡è®°
- éœ€è¦ç”¨æˆ·è¾“å…¥ï¼ˆ`input()` å‡½æ•°ï¼‰
- éœ€è¦GUIï¼ˆtkinterã€matplotlib showç­‰ï¼‰
- ç¼ºå¤±å¤–éƒ¨ä¾èµ–åŒ…
- åŒ¹é…è·³è¿‡æ¨¡å¼ï¼ˆå¦‚ `*_interactive.py`ï¼‰

## æ–‡ä»¶ç»“æ„

```
tools/tests/
â”œâ”€â”€ test_examples.py           # ä¸»è¦çš„æµ‹è¯•æ¡†æ¶
â”œâ”€â”€ test_examples_pytest.py    # pytest é›†æˆ
â”œâ”€â”€ example_strategies.py      # æµ‹è¯•ç­–ç•¥é…ç½®
â”œâ”€â”€ run_examples_tests.sh      # ä¾¿æ·è¿è¡Œè„šæœ¬
â”œâ”€â”€ pytest.ini               # pytest é…ç½®
â””â”€â”€ README.md                 # æœ¬æ–‡æ¡£
```

### æ ¸å¿ƒç»„ä»¶

#### `ExampleAnalyzer`
- å‘ç°å’Œåˆ†æç¤ºä¾‹æ–‡ä»¶
- æå–ä¾èµ–ä¿¡æ¯
- åˆ†ç±»å’Œè¯„ä¼°ç¤ºä¾‹

#### `ExampleRunner`
- æ‰§è¡Œå•ä¸ªç¤ºä¾‹
- ç®¡ç†æ‰§è¡Œç¯å¢ƒ
- æ•è·è¾“å‡ºå’Œé”™è¯¯

#### `ExampleTestSuite`
- åè°ƒæ•´ä¸ªæµ‹è¯•æµç¨‹
- ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
- ç®¡ç†æµ‹è¯•ç»Ÿè®¡

#### `ExampleTestStrategies`
- ä¸ºä¸åŒç±»åˆ«å®šä¹‰æµ‹è¯•ç­–ç•¥
- é…ç½®è¶…æ—¶ã€ç¯å¢ƒå˜é‡ç­‰
- å®šä¹‰æˆåŠŸ/å¤±è´¥æ¨¡å¼

## ä½¿ç”¨ç¤ºä¾‹

### å‘½ä»¤è¡Œå·¥å…·

```bash
# æŸ¥çœ‹å¸®åŠ©
./tools/tests/run_examples_tests.sh --help

# åˆ†æç¤ºä¾‹ï¼ˆä¸è¿è¡Œï¼‰
./tools/tests/run_examples_tests.sh --analyze

# å¿«é€Ÿæµ‹è¯•ï¼ˆCIç”¨ï¼‰
./tools/tests/run_examples_tests.sh --quick --timeout 30

# è¯¦ç»†æµ‹è¯•ç‰¹å®šç±»åˆ«
./tools/tests/run_examples_tests.sh --category rag --verbose

# pytest é›†æˆæµ‹è¯•
./tools/tests/run_examples_tests.sh --pytest --quick
```

### Python API

```python
from test_examples import ExampleTestSuite, ExampleAnalyzer

# åˆ†æç¤ºä¾‹
analyzer = ExampleAnalyzer()
examples = analyzer.discover_examples()
print(f"å‘ç° {len(examples)} ä¸ªç¤ºä¾‹")

# è¿è¡Œæµ‹è¯•
suite = ExampleTestSuite()
stats = suite.run_all_tests(categories=["tutorials"], quick_only=True)
print(f"é€šè¿‡ç‡: {stats['passed'] / stats['total'] * 100:.1f}%")
```

### pytest é›†æˆ

```bash
# è¿è¡Œæ‰€æœ‰ç¤ºä¾‹æµ‹è¯•
cd tools/tests
python3 -m pytest test_examples_pytest.py -v

# è¿è¡Œç‰¹å®šç±»åˆ«
python3 -m pytest test_examples_pytest.py -k "tutorials" -v

# å¿«é€Ÿæµ‹è¯•
python3 -m pytest test_examples_pytest.py -m quick_examples -v
```

## CI/CD é›†æˆ

### GitHub Actions ç¤ºä¾‹

```yaml
name: Examples Tests

on: [push, pull_request]

jobs:
  test-examples:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
    
    - name: Install dependencies
      run: |
        pip install typer rich pytest pytest-timeout
        
    - name: Run quick examples tests
      run: |
        ./tools/tests/run_examples_tests.sh --quick --timeout 60
        
    - name: Run pytest integration
      run: |
        cd tools/tests && python3 -m pytest test_examples_pytest.py -m quick_examples
```

## æ‰©å±•å’Œè‡ªå®šä¹‰

### æ·»åŠ æ–°çš„æµ‹è¯•ç­–ç•¥

åœ¨ `example_strategies.py` ä¸­æ·»åŠ æ–°ç±»åˆ«ï¼š

```python
"new_category": TestStrategy(
    name="new_category",
    timeout=90,
    requires_config=True,
    requires_data=False,
    success_patterns=["Success", "Completed"],
    failure_patterns=["Error", "Failed"],
    environment_vars={"CUSTOM_VAR": "test_value"}
)
```

### è‡ªå®šä¹‰è·³è¿‡æ¡ä»¶

åœ¨ `ExampleTestFilters.should_skip_file()` ä¸­æ·»åŠ ï¼š

```python
if 'custom_marker' in content:
    return True, "Custom skip condition"
```

### æ·»åŠ æ–°çš„ç»“æœéªŒè¯

åœ¨æµ‹è¯•ç­–ç•¥ä¸­å®šä¹‰ `success_patterns` å’Œ `failure_patterns`ï¼š

```python
success_patterns=[
    "Pipeline completed successfully",
    "All tests passed",
    "âœ“ Done"
]
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **å¯¼å…¥é”™è¯¯**: ç¡®ä¿ PYTHONPATH æ­£ç¡®è®¾ç½®
2. **ä¾èµ–ç¼ºå¤±**: ä½¿ç”¨ `--analyze` æŸ¥çœ‹ä¾èµ–éœ€æ±‚
3. **è¶…æ—¶**: å¢åŠ  `--timeout` å€¼æˆ–ä½¿ç”¨ `--quick`
4. **æƒé™é—®é¢˜**: ç¡®ä¿è„šæœ¬æœ‰æ‰§è¡Œæƒé™

### è°ƒè¯•æŠ€å·§

```bash
# è¯¦ç»†è¾“å‡º
./tools/tests/run_examples_tests.sh --verbose

# å•ç‹¬æµ‹è¯•æŸä¸ªç¤ºä¾‹
python3 examples/tutorials/hello_world.py

# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
python3 tools/tests/test_examples.py test --category tutorials --timeout 120
```

## è´¡çŒ®æŒ‡å—

1. æ–°å¢ç¤ºä¾‹æ—¶ï¼Œç¡®ä¿åŒ…å«é€‚å½“çš„æ–‡æ¡£
2. æ·»åŠ  `# SKIP_TEST` æ ‡è®°æ¥è·³è¿‡ä¸é€‚åˆè‡ªåŠ¨æµ‹è¯•çš„ç¤ºä¾‹
3. ä¸ºå¤æ‚ç¤ºä¾‹æ·»åŠ é…ç½®æ–‡ä»¶æ¨¡æ¿
4. æ›´æ–°æµ‹è¯•ç­–ç•¥ä»¥è¦†ç›–æ–°çš„ç¤ºä¾‹ç±»å‹

---

è¿™ä¸ªæµ‹è¯•ç³»ç»Ÿè®© SAGE çš„ç¤ºä¾‹ä»£ç å§‹ç»ˆä¿æŒé«˜è´¨é‡å’Œå¯ç”¨æ€§ï¼Œä¸ºç”¨æˆ·æä¾›å¯é çš„å­¦ä¹ å’Œå‚è€ƒèµ„æºã€‚