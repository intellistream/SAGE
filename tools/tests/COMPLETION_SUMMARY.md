# SAGE CI/CD Pytest é›†æˆå®Œæˆæ€»ç»“

## ğŸ¯ ä»»åŠ¡å®Œæˆæƒ…å†µ

### âœ… å·²å®Œæˆçš„ä»»åŠ¡

1. **README æ¸…ç†**
   - ç§»é™¤äº†çŠ¶æ€å†…å­˜æ“ä½œçš„å…·ä½“ä»£ç ç¤ºä¾‹
   - ä¿æŒæ–‡æ¡£ç®€æ´ï¼Œå¼•å¯¼ç”¨æˆ·åˆ°é›†ä¸­çš„æ–‡æ¡£ç«™ç‚¹

2. **Issues Manager è‡ªåŠ¨åŒ–æµ‹è¯•**
   - åˆ›å»ºäº† `test_issues_manager.sh` - 400å¤šè¡Œçš„ç»¼åˆæµ‹è¯•è„šæœ¬
   - æ”¯æŒä¸‰ç§æµ‹è¯•æ¨¡å¼ï¼šquickã€fullã€integration
   - è‡ªåŠ¨å¤‡ä»½ã€æ¸…ç†ã€é”™è¯¯å¤„ç†
   - è¯¦ç»†çš„æµ‹è¯•æŠ¥å‘Šç”Ÿæˆ

3. **CI/CD Pytest é›†æˆ**
   - å¢å¼ºäº† `ci.yml` - åœ¨full-testä¸­é›†æˆpytestæµ‹è¯•
   - æ”¹è¿›äº† `dev-ci.yml` - æ·»åŠ å¼€å‘ç¯å¢ƒpytestæµ‹è¯•
   - åˆ›å»ºäº†ä¸“é—¨çš„ `pytest-ci.yml` - å®Œæ•´çš„pytestå·¥ä½œæµ

4. **æµ‹è¯•åŸºç¡€è®¾æ–½æ”¹è¿›**
   - åˆ›å»ºäº† `Makefile` - ç®€åŒ–æµ‹è¯•å‘½ä»¤
   - åˆ›å»ºäº† `CI_TESTING_GUIDE.md` - å®Œæ•´çš„ä½¿ç”¨æŒ‡å—
   - é›†æˆäº†ç°æœ‰çš„ `run_tests.py` æµ‹è¯•è¿è¡Œå™¨

## ğŸ”§ æŠ€æœ¯å®ç°

### CI/CD å·¥ä½œæµç¨‹å±‚æ¬¡

1. **å¿«é€Ÿæ£€æŸ¥** (æ¯æ¬¡push)
   - åŸºç¡€å¯¼å…¥æµ‹è¯•
   - Issues Managerå¿«é€Ÿæµ‹è¯•  
   - ä»£ç è´¨é‡æ£€æŸ¥

2. **å®Œæ•´æµ‹è¯•** (PRåˆ°main)
   - å…¨é¢pytestå¥—ä»¶ (å•å…ƒæµ‹è¯• + é›†æˆæµ‹è¯•)
   - Issues Managerå®Œæ•´æµ‹è¯•
   - æµ‹è¯•æŠ¥å‘Šç”Ÿæˆ

3. **ä¸“ä¸šPytest CI** (æµ‹è¯•æ–‡ä»¶å˜æ›´)
   - æµ‹è¯•å‘ç°å’Œåˆ†ç±»
   - å¹¶è¡Œæµ‹è¯•æ‰§è¡Œ
   - æ€§èƒ½æµ‹è¯•
   - è¯¦ç»†æŠ¥å‘Šå’ŒPRè¯„è®º

### æµ‹è¯•å·¥å…·é›†

```bash
# Issues Manager æµ‹è¯•
./test_issues_manager.sh --quick        # CIé€‚ç”¨
./test_issues_manager.sh --full         # å®Œæ•´æµ‹è¯•
./test_issues_manager.sh --integration  # GitHubé›†æˆæµ‹è¯•

# Pytest æµ‹è¯•
python run_tests.py --quick --unit      # å¿«é€Ÿå•å…ƒæµ‹è¯•
python run_tests.py --quick --integration # é›†æˆæµ‹è¯•
python run_tests.py --all --performance   # æ€§èƒ½æµ‹è¯•

# ç®€åŒ–å‘½ä»¤
make test-quick    # å¿«é€ŸéªŒè¯
make test-full     # å®Œæ•´æµ‹è¯•
make test-all      # æ‰€æœ‰æµ‹è¯•
make test-ci       # CIä¸“ç”¨
```

### æµ‹è¯•å‘ç°å’Œæ‰§è¡Œ

- **è‡ªåŠ¨å‘ç°**: 132+ pytestæ–‡ä»¶è‡ªåŠ¨è¯†åˆ«
- **å¹¶è¡Œæ‰§è¡Œ**: å¯é…ç½®å¹¶å‘æ•° (é»˜è®¤4ä¸ªä»»åŠ¡)
- **è¶…æ—¶æ§åˆ¶**: é˜²æ­¢æµ‹è¯•æŒ‚èµ·
- **åˆ†ç±»æ ‡è®°**: unit, integration, performance, slowç­‰
- **ç»“æœæŠ¥å‘Š**: HTMLã€XMLã€æ–‡æœ¬å¤šç§æ ¼å¼

## ğŸ“Š è§£å†³çš„é—®é¢˜

### åŸé—®é¢˜
> "æˆ‘ä»¬ç°åœ¨çš„ci.ymlï¼ˆæˆ–è€…å…¶ä»–ymlï¼‰å¹¶æ²¡æœ‰å»è°ƒå–é¡¹ç›®çš„å„ç§pytests æ¥åšå¥½CICD"

### è§£å†³æ–¹æ¡ˆ
1. **å‘ç°äº†ç°æœ‰çš„æµ‹è¯•åŸºç¡€è®¾æ–½**
   - 132+ pytestæµ‹è¯•æ–‡ä»¶
   - æˆç†Ÿçš„ `run_tests.py` æµ‹è¯•è¿è¡Œå™¨
   - å®Œå–„çš„pytesté…ç½® (`pytest.ini`)

2. **é›†æˆåˆ°CI/CDä¸­**
   - ci.yml: åœ¨full-testä¸­è¿è¡Œpytestå¥—ä»¶
   - dev-ci.yml: å¼€å‘ç¯å¢ƒå¿«é€ŸpytestéªŒè¯
   - pytest-ci.yml: ä¸“é—¨çš„pytestå·¥ä½œæµ

3. **æ·»åŠ Issues Manageræµ‹è¯•**
   - è‡ªåŠ¨åŒ–éªŒè¯å·¥å…·åŠŸèƒ½
   - é›†æˆåˆ°CIæµç¨‹ä¸­
   - å®Œæ•´çš„æµ‹è¯•è¦†ç›–

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å¼€å‘è€…æ—¥å¸¸ä½¿ç”¨
```bash
# å¿«é€ŸéªŒè¯ä»£ç æ›´æ”¹
make test-quick

# å®Œæ•´æµ‹è¯•å¥—ä»¶
make test-full

# åªæµ‹è¯•ç‰¹å®šåŒ…
python run_tests.py --packages sage-common --unit

# ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
make test-report
```

### CI/CD è‡ªåŠ¨è§¦å‘
- **Pushåˆ°ä¸»åˆ†æ”¯**: å¿«é€Ÿæ£€æŸ¥ + Issues Manageræµ‹è¯•
- **PRåˆ°main**: å®Œæ•´æµ‹è¯•å¥—ä»¶ + pytesté›†æˆ
- **æµ‹è¯•æ–‡ä»¶å˜æ›´**: è‡ªåŠ¨è¿è¡Œpytest-ci.yml
- **æ‰‹åŠ¨è§¦å‘**: å¯é€‰æ‹©æµ‹è¯•ç±»å‹å’ŒåŒ…

### æµ‹è¯•ç›‘æ§
- GitHub Actionsç•Œé¢æŸ¥çœ‹æµ‹è¯•çŠ¶æ€
- è‡ªåŠ¨ç”Ÿæˆçš„HTMLæµ‹è¯•æŠ¥å‘Š
- PRè¯„è®ºä¸­çš„æµ‹è¯•æ‘˜è¦
- å¤±è´¥æµ‹è¯•çš„è¯¦ç»†æ—¥å¿—

## ğŸ“‹ æ–‡ä»¶æ¸…å•

### æ–°å¢æ–‡ä»¶
- `/tools/tests/test_issues_manager.sh` - Issues Managerè‡ªåŠ¨åŒ–æµ‹è¯•
- `/tools/tests/Makefile` - æµ‹è¯•å‘½ä»¤ç®€åŒ–
- `/tools/tests/CI_TESTING_GUIDE.md` - ä½¿ç”¨æŒ‡å—
- `/.github/workflows/pytest-ci.yml` - ä¸“ä¸špytestå·¥ä½œæµ

### ä¿®æ”¹æ–‡ä»¶
- `/.github/workflows/ci.yml` - é›†æˆpyteståˆ°full-test
- `/.github/workflows/dev-ci.yml` - æ·»åŠ å¼€å‘ç¯å¢ƒpytest
- `/README.md` - æ¸…ç†ç¤ºä¾‹ä»£ç 

### ç°æœ‰åˆ©ç”¨
- `/tools/tests/run_tests.py` - ç»Ÿä¸€æµ‹è¯•è¿è¡Œå™¨
- `/pytest.ini` - pytesté…ç½®
- `/tools/tests/quick_test.sh` - å¿«é€ŸéªŒè¯è„šæœ¬

## ğŸ‰ æˆæœ

1. **å®Œæ•´çš„æµ‹è¯•è¦†ç›–**: ä»å•å…ƒæµ‹è¯•åˆ°é›†æˆæµ‹è¯•åˆ°æ€§èƒ½æµ‹è¯•
2. **è‡ªåŠ¨åŒ–CI/CD**: æ— éœ€æ‰‹åŠ¨å¹²é¢„çš„æµ‹è¯•æµç¨‹
3. **çµæ´»çš„æµ‹è¯•å·¥å…·**: é€‚åº”ä¸åŒå¼€å‘éœ€æ±‚
4. **è¯¦ç»†çš„ç›‘æ§**: å®Œå–„çš„æŠ¥å‘Šå’Œé”™è¯¯è¿½è¸ª
5. **å¼€å‘å‹å¥½**: ç®€åŒ–çš„å‘½ä»¤å’Œæ¸…æ™°çš„æ–‡æ¡£

ç°åœ¨SAGEæ¡†æ¶æœ‰äº†å®Œæ•´çš„CI/CD pytesté›†æˆï¼Œç¡®ä¿ä»£ç è´¨é‡å’ŒåŠŸèƒ½ç¨³å®šæ€§ï¼ğŸ¯
