# SAGE Framework å‘å¸ƒè„šæœ¬

æœ¬ç›®å½•åŒ…å«ç”¨äºè‡ªåŠ¨åŒ–å‘å¸ƒ SAGE Framework åŒ…çš„è„šæœ¬ã€‚

## è„šæœ¬åˆ—è¡¨

### 1. `publish_all_proprietary.sh` - å®Œæ•´ç‰ˆé—­æºå‘å¸ƒè„šæœ¬

åŠŸèƒ½ä¸°å¯Œçš„é—­æºåŒ…å‘å¸ƒè„šæœ¬ï¼Œæ”¯æŒå¤šç§é€‰é¡¹å’Œè¯¦ç»†æ—¥å¿—ã€‚

**åŠŸèƒ½ç‰¹æ€§:**
- âœ… æ”¯æŒæ‰€æœ‰åŒ…æˆ–æŒ‡å®šåŒ…å‘å¸ƒ
- âœ… é¢„æ¼”æ¨¡å¼å’Œå®é™…å‘å¸ƒæ¨¡å¼
- âœ… è¯¦ç»†çš„æ—¥å¿—è®°å½•å’Œé”™è¯¯å¤„ç†
- âœ… ç‰ˆæœ¬æ£€æŸ¥å’Œä¾èµ–éªŒè¯
- âœ… å¹¶è¡Œå‘å¸ƒæ”¯æŒï¼ˆå®éªŒæ€§ï¼‰
- âœ… å‘å¸ƒæ‘˜è¦å’Œç»Ÿè®¡ä¿¡æ¯

**åŸºæœ¬ç”¨æ³•:**
```bash
# æ˜¾ç¤ºå¸®åŠ©
./scripts/publish_all_proprietary.sh --help

# é¢„æ¼”æ¨¡å¼å‘å¸ƒæ‰€æœ‰åŒ…
./scripts/publish_all_proprietary.sh --dry-run

# å¼ºåˆ¶å‘å¸ƒæ‰€æœ‰åŒ…ï¼ˆè·³è¿‡ç¡®è®¤ï¼‰
./scripts/publish_all_proprietary.sh --force

# åªå‘å¸ƒæŒ‡å®šåŒ…
./scripts/publish_all_proprietary.sh --packages sage-cli,sage-core

# è¯¦ç»†è¾“å‡ºæ¨¡å¼
./scripts/publish_all_proprietary.sh --verbose --dry-run
```

**é«˜çº§ç”¨æ³•:**
```bash
# æŒ‡å®šè¾“å‡ºç›®å½•
./scripts/publish_all_proprietary.sh --output /tmp/builds

# è·³è¿‡ç‰ˆæœ¬æ£€æŸ¥
./scripts/publish_all_proprietary.sh --skip-version-check

# å¹¶è¡Œå‘å¸ƒï¼ˆå®éªŒæ€§ï¼‰
./scripts/publish_all_proprietary.sh --parallel --force
```

### 2. `quick_publish_all.sh` - å¿«é€Ÿå‘å¸ƒè„šæœ¬

ç®€åŒ–ç‰ˆå‘å¸ƒè„šæœ¬ï¼Œç”¨äºæ—¥å¸¸å¿«é€Ÿå‘å¸ƒã€‚

**ç‰¹ç‚¹:**
- ğŸš€ ç®€å•æ˜“ç”¨ï¼Œæœ€å°‘çš„é€‰é¡¹
- âš¡ å¿«é€Ÿå‘å¸ƒæ‰€æœ‰åŒ…
- ğŸ“Š ç®€æ´çš„å‘å¸ƒæ‘˜è¦

**ç”¨æ³•:**
```bash
# é¢„æ¼”æ¨¡å¼
./scripts/quick_publish_all.sh --dry-run

# å®é™…å‘å¸ƒ
./scripts/quick_publish_all.sh --force

# äº¤äº’å¼å‘å¸ƒ
./scripts/quick_publish_all.sh
```

## ä½¿ç”¨åœºæ™¯

### æ—¥å¸¸å¼€å‘å‘å¸ƒ
ä½¿ç”¨å¿«é€Ÿå‘å¸ƒè„šæœ¬è¿›è¡Œæ—¥å¸¸çš„åŒ…å‘å¸ƒï¼š
```bash
./scripts/quick_publish_all.sh --dry-run  # å…ˆé¢„æ¼”
./scripts/quick_publish_all.sh            # å®é™…å‘å¸ƒ
```

### ç”Ÿäº§ç¯å¢ƒå‘å¸ƒ
ä½¿ç”¨å®Œæ•´ç‰ˆè„šæœ¬è¿›è¡Œç”Ÿäº§ç¯å¢ƒçš„æ­£å¼å‘å¸ƒï¼š
```bash
# 1. è¯¦ç»†é¢„æ¼”
./scripts/publish_all_proprietary.sh --dry-run --verbose

# 2. å®é™…å‘å¸ƒ
./scripts/publish_all_proprietary.sh --force
```

### éƒ¨åˆ†åŒ…å‘å¸ƒ
åªå‘å¸ƒç‰¹å®šçš„åŒ…ï¼š
```bash
./scripts/publish_all_proprietary.sh --packages sage-cli,sage-core --verbose
```

## å‰ç½®è¦æ±‚

1. **å®‰è£… sage-dev-toolkit:**
   ```bash
   pip install -e packages/sage-dev-toolkit
   ```

2. **é…ç½® PyPI è®¤è¯:**
   ç¡®ä¿ `~/.pypirc` æ–‡ä»¶é…ç½®æ­£ç¡®ï¼š
   ```ini
   [distutils]
   index-servers =
       pypi
       testpypi

   [pypi]
   username = __token__
   password = pypi-AgE...  # ä½ çš„ PyPI token

   [testpypi]
   repository = https://test.pypi.org/legacy/
   username = __token__
   password = pypi-AgE...  # ä½ çš„ TestPyPI token
   ```

3. **å®‰è£…ä¾èµ–å·¥å…·:**
   ```bash
   pip install twine build tomli
   ```

## å·¥ä½œæµç¨‹

ä¸¤ä¸ªè„šæœ¬éƒ½éµå¾ªç›¸åŒçš„åŸºæœ¬å·¥ä½œæµç¨‹ï¼š

1. **ä¾èµ–æ£€æŸ¥** - éªŒè¯å¿…è¦çš„å·¥å…·å’Œç¯å¢ƒ
2. **åŒ…å‘ç°** - è‡ªåŠ¨å‘ç°æˆ–ä½¿ç”¨æŒ‡å®šçš„åŒ…åˆ—è¡¨
3. **ç‰ˆæœ¬æ£€æŸ¥** - æ£€æŸ¥åŒ…ç‰ˆæœ¬ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰
4. **ç”¨æˆ·ç¡®è®¤** - æ˜¾ç¤ºå°†è¦å‘å¸ƒçš„åŒ…å¹¶ç¡®è®¤ï¼ˆé™¤éä½¿ç”¨ --forceï¼‰
5. **é€åŒ…å‘å¸ƒ** - ä½¿ç”¨ `sage-dev proprietary` å‘å¸ƒæ¯ä¸ªåŒ…
6. **ç»“æœæ±‡æ€»** - æ˜¾ç¤ºå‘å¸ƒç»“æœå’Œç»Ÿè®¡ä¿¡æ¯

## æ—¥å¿—å’Œè°ƒè¯•

### å®Œæ•´ç‰ˆè„šæœ¬æ—¥å¿—
å®Œæ•´ç‰ˆè„šæœ¬ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ç”Ÿæˆè¯¦ç»†çš„æ—¥å¿—æ–‡ä»¶ï¼š
```
publish_all_YYYYMMDD_HHMMSS.log
```

### å¸¸è§é—®é¢˜æ’æŸ¥

**1. åŒ…è·¯å¾„éªŒè¯å¤±è´¥**
- ç¡®ä¿åŒ…ç›®å½•å­˜åœ¨ä¸”åŒ…å« `pyproject.toml`
- æ£€æŸ¥åŒ…ç›®å½•ç»“æ„æ˜¯å¦æ­£ç¡®

**2. sage-dev å‘½ä»¤æœªæ‰¾åˆ°**
```bash
pip install -e packages/sage-dev-toolkit
```

**3. PyPI è®¤è¯å¤±è´¥**
- æ£€æŸ¥ `~/.pypirc` æ–‡ä»¶æ ¼å¼
- éªŒè¯ PyPI token æ˜¯å¦æœ‰æ•ˆ

**4. åŒ…ç‰ˆæœ¬å†²çª**
- æ£€æŸ¥ PyPI ä¸Šæ˜¯å¦å·²å­˜åœ¨ç›¸åŒç‰ˆæœ¬
- æ›´æ–°åŒ…çš„ç‰ˆæœ¬å·

## å®‰å…¨æ³¨æ„äº‹é¡¹

1. **ç§æœ‰ token ä¿æŠ¤**: ç¡®ä¿ PyPI token å®‰å…¨ï¼Œä¸è¦æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
2. **é¢„æ¼”æ¨¡å¼**: åœ¨æ­£å¼å‘å¸ƒå‰åŠ¡å¿…ä½¿ç”¨é¢„æ¼”æ¨¡å¼æµ‹è¯•
3. **ç‰ˆæœ¬æ§åˆ¶**: å‘å¸ƒå‰ç¡®ä¿ä»£ç å·²æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ
4. **å¤‡ä»½**: é‡è¦ç‰ˆæœ¬å‘å¸ƒå‰å»ºè®®åˆ›å»ºå¤‡ä»½

## è„šæœ¬ç»´æŠ¤

å¦‚éœ€ä¿®æ”¹è„šæœ¬ï¼Œè¯·æ³¨æ„ï¼š
- ä¿æŒå‘åå…¼å®¹æ€§
- æ·»åŠ é€‚å½“çš„é”™è¯¯å¤„ç†
- æ›´æ–°æ–‡æ¡£å’Œå¸®åŠ©ä¿¡æ¯
- æµ‹è¯•æ‰€æœ‰åŠŸèƒ½é€‰é¡¹

## æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·ï¼š
1. æ£€æŸ¥æ—¥å¿—æ–‡ä»¶ä¸­çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯
2. ç¡®è®¤ç¯å¢ƒå’Œä¾èµ–é…ç½®
3. ä½¿ç”¨ `--verbose` é€‰é¡¹è·å–æ›´å¤šä¿¡æ¯
4. è”ç³»å¼€å‘å›¢é˜Ÿè·å–æ”¯æŒ
